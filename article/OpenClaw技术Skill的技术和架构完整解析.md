# OpenClaw Skill æŠ€æœ¯ä¸æ¶æ„å®Œæ•´è§£æ

## ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [Skill è®¾è®¡å“²å­¦](#skill-è®¾è®¡å“²å­¦)
3. [æ•´ä½“æ¶æ„è®¾è®¡](#æ•´ä½“æ¶æ„è®¾è®¡)
4. [æ ¸å¿ƒæ•°æ®ç»“æ„ä¸ç±»å‹ç³»ç»Ÿ](#æ ¸å¿ƒæ•°æ®ç»“æ„ä¸ç±»å‹ç³»ç»Ÿ)
5. [Skill æ–‡ä»¶æ ¼å¼è§„èŒƒ](#skill-æ–‡ä»¶æ ¼å¼è§„èŒƒ)
6. [Skill åŠ è½½æœºåˆ¶](#skill-åŠ è½½æœºåˆ¶)
7. [Skill æ‰§è¡Œæµç¨‹](#skill-æ‰§è¡Œæµç¨‹)
8. [Skill èµ„æ ¼åˆ¤å®šç®—æ³•](#skill-èµ„æ ¼åˆ¤å®šç®—æ³•)
9. [Skill å®‰è£…ç³»ç»Ÿ](#skill-å®‰è£…ç³»ç»Ÿ)
10. [Skill å®‰å…¨æœºåˆ¶](#skill-å®‰å…¨æœºåˆ¶)
11. [Skill é…ç½®ç³»ç»Ÿ](#skill-é…ç½®ç³»ç»Ÿ)
12. [è¿œç¨‹ Skill æ”¯æŒ](#è¿œç¨‹-skill-æ”¯æŒ)
13. [ClawHub æŠ€èƒ½ç”Ÿæ€ç³»ç»Ÿ](#clawhub-æŠ€èƒ½ç”Ÿæ€ç³»ç»Ÿ)
14. [æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜æœºåˆ¶](#æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜æœºåˆ¶)
15. [å¹¶å‘æ§åˆ¶ä¸çº¿ç¨‹å®‰å…¨](#å¹¶å‘æ§åˆ¶ä¸çº¿ç¨‹å®‰å…¨)
16. [é”™è¯¯å¤„ç†ä¸é‡è¯•æœºåˆ¶](#é”™è¯¯å¤„ç†ä¸é‡è¯•æœºåˆ¶)
17. [å¼€å‘è§„èŒƒä¸æœ€ä½³å®è·µ](#å¼€å‘è§„èŒƒä¸æœ€ä½³å®è·µ)
18. [å¼€æºæ ‡å‡†è§„èŒƒ](#å¼€æºæ ‡å‡†è§„èŒƒ)
19. [æœªæ¥å‘å±•æ–¹å‘](#æœªæ¥å‘å±•æ–¹å‘)

---

## æ¦‚è¿°

åœ¨å¤§æ¨¡å‹æ—¶ä»£ï¼ŒAI åŠ©æ‰‹çš„èƒ½åŠ›è¾¹ç•Œä¸å†å±€é™äºé¢„è®­ç»ƒçŸ¥è¯†ï¼Œè€Œæ˜¯é€šè¿‡**Skillï¼ˆæŠ€èƒ½ï¼‰ç³»ç»Ÿ**å®ç°æ— é™æ‰©å±•ã€‚OpenClaw ä½œä¸ºä¸€æ¬¾å…ˆè¿›çš„ AI åŠ©æ‰‹æ¡†æ¶ï¼Œå…¶ Skill ç³»ç»Ÿçš„è®¾è®¡å’Œå®ç°ç›´æ¥å†³å®šäº†ç”¨æˆ·ä½“éªŒçš„ä¼˜åŠ£ã€‚

OpenClaw çš„ Skill ç³»ç»Ÿé‡‡ç”¨**å£°æ˜å¼ã€æ¨¡å—åŒ–**çš„è®¾è®¡ç†å¿µï¼Œå…è®¸å¼€å‘è€…é€šè¿‡ç®€å•çš„ `SKILL.md` æ–‡ä»¶å®šä¹‰åŠŸèƒ½ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç å³å¯æ‰©å±• AI åŠ©æ‰‹çš„èƒ½åŠ›ã€‚

### æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **å£°æ˜å¼å®šä¹‰** | é€šè¿‡ `SKILL.md` æ–‡ä»¶å®šä¹‰ Skill çš„åŠŸèƒ½å’Œå…ƒæ•°æ® |
| **å¤šæºåŠ è½½** | æ”¯æŒå†…ç½®ã€ç”¨æˆ·ã€å·¥ä½œåŒºã€æ’ä»¶ç­‰å¤šç§æ¥æº |
| **åŠ¨æ€è¿‡æ»¤** | åŸºäºå¹³å°ã€ä¾èµ–ã€ç¯å¢ƒå˜é‡çš„æ¡ä»¶åŠ è½½ |
| **å®‰å…¨æ‰«æ** | å®‰è£…å‰è‡ªåŠ¨æ£€æµ‹å±é™©ä»£ç  |
| **è¿œç¨‹æ‰§è¡Œ** | æ”¯æŒé€šè¿‡è¿œç¨‹èŠ‚ç‚¹æ‰§è¡Œå¹³å°ç‰¹å®š Skill |
| **çƒ­é‡è½½** | å¼€å‘æ—¶è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶å˜æ›´ |
| **æ¸è¿›å¼æŠ«éœ²** | å…ƒæ•°æ®å¸¸é©»ä¸Šä¸‹æ–‡ï¼Œè¯¦ç»†å†…å®¹æŒ‰éœ€åŠ è½½ |

---

## Skill è®¾è®¡å“²å­¦

### 1. æ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰

Skill ç³»ç»Ÿé‡‡ç”¨æ¸è¿›å¼æŠ«éœ²è®¾è®¡ï¼Œå¹³è¡¡äº†ä¸Šä¸‹æ–‡å®Œæ•´æ€§å’Œæ•ˆç‡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å§‹ç»ˆä¿ç•™åœ¨ä¸Šä¸‹æ–‡ä¸­      â”‚  æŒ‰éœ€åŠ è½½çš„è¯¦ç»†å†…å®¹          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - name                 â”‚  - å®Œæ•´çš„ SKILL.md æ–‡æ¡£      â”‚
â”‚  - description          â”‚  - scripts/ ç›®å½•ä¸‹çš„è„šæœ¬      â”‚
â”‚  - emoji                â”‚  - references/ å‚è€ƒèµ„æ–™       â”‚
â”‚  - requires (æ‘˜è¦)      â”‚  - assets/ èµ„æºæ–‡ä»¶           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¾è®¡ä¼˜åŠ¿**ï¼š
- AI å§‹ç»ˆçŸ¥é“æœ‰å“ªäº› Skill å¯ç”¨
- ä¸Šä¸‹æ–‡ä¸ä¼šè¿‡é•¿ï¼ˆtoken æ•ˆç‡ï¼‰
- è¯¦ç»†å†…å®¹åœ¨éœ€è¦æ—¶æ‰åŠ è½½ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰

### 2. çº¦å®šä¼˜äºé…ç½®

- å›ºå®šæ–‡ä»¶å `SKILL.md`
- æ ‡å‡† YAML Frontmatter æ ¼å¼
- ç»Ÿä¸€çš„ç›®å½•ç»“æ„
- è‡ªåŠ¨å‘ç°å’ŒåŠ è½½æœºåˆ¶

### 3. å¯ç»„åˆæ€§

Skills å¯ä»¥ç›¸äº’ä¾èµ–ã€ç»„åˆï¼Œå½¢æˆå¤æ‚çš„å·¥ä½œæµã€‚ä¾‹å¦‚ï¼š
- `github` Skill å¯ä»¥ä¸ `slack` Skill ç»„åˆï¼Œå®ç° PR é€šçŸ¥
- `summarize` Skill å¯ä»¥ä¸ `notion` Skill ç»„åˆï¼Œå®ç°æ–‡ç« æ‘˜è¦å­˜å‚¨

### 4. å¹³å°æ— å…³æ€§

é€šè¿‡è¿œç¨‹æ‰§è¡Œæœºåˆ¶ï¼ŒSkill å¯ä»¥è·¨å¹³å°å·¥ä½œï¼š
- åœ¨ Linux/Windows ä¸Šè¿è¡Œ OpenClaw
- é€šè¿‡è¿œç¨‹ macOS èŠ‚ç‚¹æ‰§è¡Œ Apple ç”Ÿæ€ Skill

---

## æ•´ä½“æ¶æ„è®¾è®¡

### æ¶æ„åˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åº”ç”¨å±‚ (Application)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   CLI å·¥å…·   â”‚  â”‚   Web UI    â”‚  â”‚  Gateway    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        è°ƒç”¨å±‚ (Invocation)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ å‘½ä»¤è§£æå™¨   â”‚  â”‚ æŠ€èƒ½åŒ¹é…å™¨   â”‚  â”‚ å‚æ•°æå–å™¨   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        æ‰§è¡Œå±‚ (Execution)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ æ‰§è¡Œå¼•æ“     â”‚  â”‚ å®‰å…¨ç®¡ç†å™¨   â”‚  â”‚ ç¯å¢ƒæ„å»ºå™¨   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        å¹³å°å±‚ (Platform)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Windows é€‚é… â”‚  â”‚  macOS é€‚é…  â”‚  â”‚  Linux é€‚é…  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        æ•°æ®å±‚ (Data)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ æŠ€èƒ½å­˜å‚¨     â”‚  â”‚ é…ç½®ç®¡ç†     â”‚  â”‚ ç¼“å­˜ç³»ç»Ÿ     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | èŒè´£ | å…³é”®æ–‡ä»¶ |
|------|------|----------|
| **GatewayClient** | ç³»ç»Ÿé€šä¿¡æ ¸å¿ƒï¼Œå¤„ç†æŠ€èƒ½æ‰§è¡Œè¯·æ±‚ | `src/gateway/client.ts` |
| **Skill Loader** | æŠ€èƒ½å‘ç°å’ŒåŠ è½½ | `src/agents/skills/workspace.ts` |
| **Command Parser** | è§£æç”¨æˆ·è¾“å…¥ï¼ŒåŒ¹é…å¯¹åº”çš„æŠ€èƒ½ | `src/auto-reply/skill-commands.ts` |
| **Security Manager** | ç¡®ä¿æŠ€èƒ½æ‰§è¡Œçš„å®‰å…¨æ€§ | `src/security/skill-scanner.ts` |
| **Execution Engine** | è´Ÿè´£æŠ€èƒ½çš„å®é™…æ‰§è¡Œ | `src/node-host/runner.ts` |
| **Platform Adapter** | å¤„ç†ä¸åŒå¹³å°çš„å·®å¼‚ | `src/infra/exec-host.ts` |
| **SkillBinsCache** | æŠ€èƒ½ç¼“å­˜ç®¡ç†å™¨ | `src/node-host/runner.ts` |

### ç³»ç»Ÿäº¤äº’æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å®Œæ•´ç³»ç»Ÿäº¤äº’æµç¨‹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   ç”¨æˆ·è¾“å…¥ â”€â”€â–¶ å‘½ä»¤è§£æå™¨ â”€â”€â–¶ æŠ€èƒ½åŒ¹é…å™¨ â”€â”€â–¶ èµ„æ ¼æ£€æŸ¥å™¨                  â”‚
â”‚                                      â”‚                                   â”‚
â”‚                                      â–¼                                   â”‚
â”‚   ç»“æœå±•ç¤º â—€â”€â”€ ç»“æœå¤„ç†å™¨ â—€â”€â”€ æ‰§è¡Œå¼•æ“ â—€â”€â”€ ç¯å¢ƒæ„å»ºå™¨                     â”‚
â”‚       â”‚                              â”‚                                   â”‚
â”‚       â”‚                              â–¼                                   â”‚
â”‚       â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚       â”‚                       â”‚  Gateway RPC â”‚                            â”‚
â”‚       â”‚                       â”‚  - status    â”‚                            â”‚
â”‚       â”‚                       â”‚  - install   â”‚                            â”‚
â”‚       â”‚                       â”‚  - update    â”‚                            â”‚
â”‚       â”‚                       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚       â”‚                              â”‚                                   â”‚
â”‚       â”‚                              â–¼                                   â”‚
â”‚       â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚       â”‚                       â”‚  Node Host  â”‚                            â”‚
â”‚       â”‚                       â”‚  - æœ¬åœ°æ‰§è¡Œ  â”‚                            â”‚
â”‚       â”‚                       â”‚  - è¿œç¨‹æ‰§è¡Œ  â”‚                            â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  - ç¼“å­˜ç®¡ç†  â”‚                            â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒæ•°æ®ç»“æ„ä¸ç±»å‹ç³»ç»Ÿ

### åŸºç¡€ç±»å‹å®šä¹‰

```typescript
// ============================================
// Skill å®‰è£…è§„èŒƒ
// ============================================
interface SkillInstallSpec {
  id?: string;                    // å®‰è£…å™¨æ ‡è¯†
  kind: "brew" | "node" | "go" | "uv" | "download";  // å®‰è£…æ–¹å¼
  label?: string;                 // æ˜¾ç¤ºæ ‡ç­¾
  bins?: string[];                // å®‰è£…åæä¾›çš„äºŒè¿›åˆ¶æ–‡ä»¶
  os?: string[];                  // æ”¯æŒçš„æ“ä½œç³»ç»Ÿ
  formula?: string;               // brewå…¬å¼å
  package?: string;               // npmåŒ…å
  module?: string;                // goæ¨¡å—
  url?: string;                   // ä¸‹è½½URL
  archive?: string;               // å‹ç¼©åŒ…ç±»å‹
  extract?: boolean;              // æ˜¯å¦è§£å‹
  stripComponents?: number;       // è§£å‹æ—¶è·³è¿‡çš„ç›®å½•å±‚çº§
  targetDir?: string;             // ç›®æ ‡ç›®å½•
}

// ============================================
// OpenClaw Skill å…ƒæ•°æ®
// ============================================
interface OpenClawSkillMetadata {
  always?: boolean;               // æ˜¯å¦æ€»æ˜¯å¯ç”¨ï¼ˆå¿½ç•¥ä¾èµ–æ£€æŸ¥ï¼‰
  skillKey?: string;              // æŠ€èƒ½å”¯ä¸€é”®
  primaryEnv?: string;            // ä¸»è¦ç¯å¢ƒå˜é‡åï¼ˆç”¨äºAPI Keyï¼‰
  emoji?: string;                 // è¡¨æƒ…ç¬¦å·
  homepage?: string;              // ä¸»é¡µé“¾æ¥
  os?: string[];                  // æ”¯æŒçš„æ“ä½œç³»ç»Ÿåˆ—è¡¨
  requires?: {
    bins?: string[];              // å¿…éœ€çš„äºŒè¿›åˆ¶æ–‡ä»¶
    anyBins?: string[];           // ä»»ä¸€å¿…éœ€çš„äºŒè¿›åˆ¶æ–‡ä»¶
    env?: string[];               // å¿…éœ€çš„ç¯å¢ƒå˜é‡
    config?: string[];            // å¿…éœ€çš„é…ç½®è·¯å¾„
  };
  install?: SkillInstallSpec[];   // å®‰è£…è§„èŒƒåˆ—è¡¨
}

// ============================================
// Skill è°ƒç”¨ç­–ç•¥
// ============================================
interface SkillInvocationPolicy {
  userInvocable: boolean;         // ç”¨æˆ·æ˜¯å¦å¯ç›´æ¥è°ƒç”¨
  disableModelInvocation: boolean; // æ˜¯å¦ç¦ç”¨æ¨¡å‹è°ƒç”¨
}

// ============================================
// Skill å‘½ä»¤åˆ†å‘è§„èŒƒ
// ============================================
interface SkillCommandDispatchSpec {
  kind: "tool";
  toolName: string;               // å·¥å…·åç§°
  argMode?: "raw";                // å‚æ•°ä¼ é€’æ¨¡å¼
}

// ============================================
// Skill å‘½ä»¤è§„èŒƒ
// ============================================
interface SkillCommandSpec {
  name: string;                   // å‘½ä»¤åç§°
  skillName: string;              // æŠ€èƒ½åç§°
  description: string;            // æè¿°
  dispatch?: SkillCommandDispatchSpec; // åˆ†å‘é…ç½®
}

// ============================================
// Skill æ¡ç›® - è¿è¡Œæ—¶ä½¿ç”¨çš„å®Œæ•´ Skill ä¿¡æ¯
// ============================================
interface SkillEntry {
  skill: Skill;                   // åŸºç¡€ Skill å¯¹è±¡
  frontmatter: ParsedSkillFrontmatter; // è§£æçš„ Frontmatter
  metadata?: OpenClawSkillMetadata;    // OpenClaw å…ƒæ•°æ®
  invocation?: SkillInvocationPolicy;  // è°ƒç”¨ç­–ç•¥
}

// ============================================
// Skill å¿«ç…§ - ç”¨äºç¼“å­˜å’Œä¼ è¾“
// ============================================
interface SkillSnapshot {
  prompt: string;                 // æ ¼å¼åŒ–åçš„æç¤ºæ–‡æœ¬
  skills: Array<{ name: string; primaryEnv?: string }>;
  resolvedSkills?: Skill[];       // è§£æåçš„ Skill åˆ—è¡¨
  version?: number;               // ç‰ˆæœ¬å·
}
```

---

## Skill æ–‡ä»¶æ ¼å¼è§„èŒƒ

### æ–‡ä»¶ç»“æ„

```
skills/
â””â”€â”€ my-skill/
    â”œâ”€â”€ SKILL.md          # å¿…éœ€ï¼šSkill å®šä¹‰æ–‡ä»¶
    â”œâ”€â”€ scripts/          # å¯é€‰ï¼šæ‰§è¡Œè„šæœ¬
    â”œâ”€â”€ references/       # å¯é€‰ï¼šå‚è€ƒèµ„æ–™
    â””â”€â”€ assets/           # å¯é€‰ï¼šèµ„æºæ–‡ä»¶
```

### SKILL.md å®Œæ•´æ ¼å¼

```markdown
---
name: "skill-name"                    # å¿…éœ€ï¼šSkill æ ‡è¯†ç¬¦
                                     # è§„åˆ™ï¼šå°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦
                                     # ç¤ºä¾‹ï¼š"github", "spotify-player"

description: "Skill åŠŸèƒ½æè¿°"          # å¿…éœ€ï¼šè§¦å‘æœºåˆ¶æè¿°
                                     # æ ¼å¼ï¼š"åšä»€ä¹ˆã€‚åœ¨ä»€ä¹ˆæƒ…å†µä¸‹è°ƒç”¨ã€‚"
                                     # ç¤ºä¾‹ï¼š"ç®¡ç† GitHub ä»“åº“ã€‚å½“ç”¨æˆ·æåŠ PRã€Issue æ—¶è°ƒç”¨ã€‚"

homepage: "https://example.com"       # å¯é€‰ï¼šé¡¹ç›®ä¸»é¡µ

user-invocable: true                  # å¯é€‰ï¼šæ˜¯å¦å¯ä½œä¸ºç”¨æˆ·å‘½ä»¤
                                     # é»˜è®¤ï¼štrue
                                     # è®¾ä¸º false æ—¶åªèƒ½é€šè¿‡æ¨¡å‹è°ƒç”¨

disable-model-invocation: false       # å¯é€‰ï¼šæ˜¯å¦ç¦ç”¨æ¨¡å‹è‡ªåŠ¨è°ƒç”¨
                                     # é»˜è®¤ï¼šfalse
                                     # è®¾ä¸º true æ—¶åªèƒ½é€šè¿‡ /skill:name è°ƒç”¨

command-dispatch: "tool"              # å¯é€‰ï¼šå‘½ä»¤åˆ†å‘ç±»å‹
                                     # å½“å‰ä»…æ”¯æŒï¼š"tool"

command-tool: "toolName"              # å¯é€‰ï¼šå…³è”çš„å·¥å…·åç§°
                                     # å½“ command-dispatch ä¸º tool æ—¶å¿…éœ€

command-arg-mode: "raw"               # å¯é€‰ï¼šå‚æ•°ä¼ é€’æ¨¡å¼
                                     # å½“å‰ä»…æ”¯æŒï¼š"raw"

metadata:                             # å¯é€‰ï¼šOpenClaw æ‰©å±•å…ƒæ•°æ®ï¼ˆJSON5 æ ¼å¼ï¼‰
  {
    "openclaw": {
      # === åŸºç¡€å…ƒæ•°æ® ===
      "emoji": "ğŸš€",                  # å¯é€‰ï¼šè¡¨æƒ…ç¬¦å·
      "homepage": "https://...",      # å¯é€‰ï¼šè¦†ç›–é¡¶å±‚ homepage
      "skillKey": "customKey",        # å¯é€‰ï¼šé…ç½®ä¸­ä½¿ç”¨çš„é”®
      
      # === å¹³å°é™åˆ¶ ===
      "os": ["darwin", "linux"],      # å¯é€‰ï¼šæ”¯æŒçš„å¹³å°
                                      # å¯é€‰å€¼ï¼š"darwin", "linux", "win32"
      
      # === ä¾èµ–è¦æ±‚ ===
      "requires": {
        "bins": ["gh", "git"],        # å¿…éœ€ï¼šå¿…é¡»å­˜åœ¨çš„äºŒè¿›åˆ¶æ–‡ä»¶
        "anyBins": ["node", "bun"],   # å¯é€‰ï¼šè‡³å°‘ä¸€ä¸ªå­˜åœ¨çš„äºŒè¿›åˆ¶æ–‡ä»¶
        "env": ["GITHUB_TOKEN"],      # å¯é€‰ï¼šå¿…é¡»è®¾ç½®çš„ç¯å¢ƒå˜é‡
        "config": ["github.token"]    # å¯é€‰ï¼šå¿…é¡»å­˜åœ¨çš„é…ç½®è·¯å¾„
      },
      
      # === å®‰è£…é…ç½® ===
      "install": [
        {
          "kind": "brew",              # å®‰è£…ç±»å‹
          "formula": "gh",             # brew å…¬å¼å
          "bins": ["gh"],              # å®‰è£…åæä¾›çš„äºŒè¿›åˆ¶æ–‡ä»¶
          "os": ["darwin", "linux"]    # æ­¤å®‰è£…å™¨æ”¯æŒçš„å¹³å°
        },
        {
          "kind": "node",
          "package": "@anthropic-ai/claude-code",
          "bins": ["claude"]
        },
        {
          "kind": "go",
          "module": "github.com/cli/cli/v2/cmd/gh",
          "bins": ["gh"]
        },
        {
          "kind": "uv",
          "package": "mypackage",
          "bins": ["mybin"]
        },
        {
          "kind": "download",
          "url": "https://example.com/tool.tar.gz",
          "archive": "tar.gz",
          "extract": true,
          "stripComponents": 1,
          "targetDir": "bin",
          "bins": ["tool"]
        }
      ],
      
      # === å…¶ä»–æ ‡å¿— ===
      "always": false                  # å¯é€‰ï¼šå§‹ç»ˆåŒ…å«æ­¤ Skill
                                      # è®¾ä¸º true æ—¶å¿½ç•¥èµ„æ ¼æ£€æŸ¥
    }
  }
---

# Skill æ ‡é¢˜

è¯¦ç»†çš„ Skill ä½¿ç”¨è¯´æ˜ã€ç¤ºä¾‹ã€æ³¨æ„äº‹é¡¹ç­‰ã€‚
æ”¯æŒå®Œæ•´çš„ Markdown è¯­æ³•ã€‚
```

### å®Œæ•´ç¤ºä¾‹ï¼šGitHub Skill

```markdown
---
name: "github"
description: "GitHub CLI é›†æˆï¼Œç”¨äºç®¡ç† PRã€Issueã€ä»“åº“ã€‚å½“ç”¨æˆ·æåŠ GitHub æ“ä½œæ—¶è°ƒç”¨ã€‚"
homepage: "https://cli.github.com"

metadata:
  {
    "openclaw": {
      "emoji": "ğŸ™",
      "requires": {
        "bins": ["gh"],
        "env": ["GITHUB_TOKEN"]
      },
      "install": [
        {
          "kind": "brew",
          "formula": "gh",
          "bins": ["gh"],
          "os": ["darwin", "linux"]
        },
        {
          "kind": "download",
          "url": "https://github.com/cli/cli/releases/download/v2.40.0/gh_2.40.0_windows_amd64.zip",
          "archive": "zip",
          "extract": true,
          "bins": ["gh"],
          "os": ["win32"]
        }
      ]
    }
  }
---

# GitHub

ä½¿ç”¨ `gh` CLI ç®¡ç† GitHub èµ„æºã€‚

## å¸¸ç”¨å‘½ä»¤

- `gh pr list` - åˆ—å‡º PR
- `gh issue create` - åˆ›å»º Issue
- `gh repo view` - æŸ¥çœ‹ä»“åº“ä¿¡æ¯

## æ³¨æ„äº‹é¡¹

éœ€è¦è®¾ç½® `GITHUB_TOKEN` ç¯å¢ƒå˜é‡è¿›è¡Œè®¤è¯ã€‚
```

---

## Skill åŠ è½½æœºåˆ¶

### åŠ è½½æ¥æºï¼ˆä¼˜å…ˆçº§ä»ä½åˆ°é«˜ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Extra Dirs    (skills.load.extraDirs é…ç½®)              â”‚
â”‚     â†“                                                       â”‚
â”‚  2. Bundled       (OpenClaw å†…ç½® skills)                     â”‚
â”‚     â†“                                                       â”‚
â”‚  3. Managed       (~/.openclaw/skills/)                      â”‚
â”‚     â†“                                                       â”‚
â”‚  4. Workspace     (<workspace>/skills/)                      â”‚
â”‚     â†“                                                       â”‚
â”‚  5. Plugin        (æ’ä»¶æä¾›çš„ skills)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜å…ˆçº§è¯´æ˜**ï¼š
- **Extra Dirs**ï¼šé€šè¿‡é…ç½®æŒ‡å®šçš„é¢å¤–ç›®å½•ï¼Œä¼˜å…ˆçº§æœ€ä½
- **Bundled**ï¼šéš OpenClaw ä¸€èµ·åˆ†å‘çš„å†…ç½® Skill
- **Managed**ï¼š`~/.openclaw/skills` ç›®å½•ä¸‹çš„ç”¨æˆ· Skill
- **Workspace**ï¼š`<workspace>/skills` ç›®å½•ä¸‹çš„å·¥ä½œåŒº Skillï¼Œä¼˜å…ˆçº§æœ€é«˜
- **Plugin**ï¼šæ’ä»¶æä¾›çš„ Skillï¼ŒåŠ¨æ€åŠ è½½

### åŠ è½½ç®—æ³•è¯¦è§£ï¼ˆä¼ªä»£ç ï¼‰

```typescript
// ============================================
// ä¸»åŠ è½½å‡½æ•°ï¼šä»å¤šä¸ªæºåŠ è½½ Skill æ¡ç›®
// ============================================
FUNCTION loadSkillEntries(workspaceDir: string, opts?: LoadOptions): SkillEntry[] {
    // 1. å®šä¹‰å¤šä¸ª Skill æ¥æºç›®å½•åŠå…¶ä¼˜å…ˆçº§
    const sources = [
        { dir: extraDirs,          source: "openclaw-extra",     priority: 0 },
        { dir: bundledSkillsDir,   source: "openclaw-bundled",   priority: 1 },
        { dir: managedSkillsDir,   source: "openclaw-managed",   priority: 2 },
        { dir: workspaceSkillsDir, source: "openclaw-workspace", priority: 3 }
    ];
    
    // 2. å¹¶è¡ŒåŠ è½½æ‰€æœ‰æ¥æº
    const loadSkills = (params: LoadParams) => {
        loaded = loadSkillsFromDir(params)
        IF Array.isArray(loaded): RETURN loaded
        IF loaded?.skills IS Array: RETURN loaded.skills
        RETURN []
    }
    
    // ä»å„ä¸ªæºåŠ è½½ Skill
    const bundledSkills = bundledSkillsDir 
        ? loadSkills({ dir: bundledSkillsDir, source: "openclaw-bundled" })
        : []
    const extraSkills = extraDirs.flatMap(dir => 
        loadSkills({ dir: resolveUserPath(dir), source: "openclaw-extra" })
    )
    const managedSkills = loadSkills({ dir: managedSkillsDir, source: "openclaw-managed" })
    const workspaceSkills = loadSkills({ dir: workspaceSkillsDir, source: "openclaw-workspace" })

    // 3. ä¼˜å…ˆçº§åˆå¹¶ç®—æ³•ï¼ˆMapå»é‡ï¼Œé«˜ä¼˜å…ˆçº§è¦†ç›–ï¼‰
    // ä¼˜å…ˆçº§é¡ºåº: extra < bundled < managed < workspace
    const merged = new Map<string, Skill>()
    
    // ä½ä¼˜å…ˆçº§å…ˆåŠ å…¥
    for (const skill of extraSkills) {
        merged.set(skill.name, skill)  // åŸºç¡€å±‚
    }
    // ä¸­ç­‰ä¼˜å…ˆçº§è¦†ç›–
    for (const skill of bundledSkills) {
        merged.set(skill.name, skill)  // è¦†ç›–extra
    }
    for (const skill of managedSkills) {
        merged.set(skill.name, skill)  // è¦†ç›–bundled
    }
    // é«˜ä¼˜å…ˆçº§æœ€åè¦†ç›–
    for (const skill of workspaceSkills) {
        merged.set(skill.name, skill)  // æœ€é«˜ä¼˜å…ˆçº§
    }

    // 4. è½¬æ¢ä¸º SkillEntry å¹¶è§£æå…ƒæ•°æ®
    return Array.from(merged.values()).map(skill => {
        frontmatter = {}
        TRY:
            raw = fs.readFileSync(skill.filePath, "utf-8")
            frontmatter = parseFrontmatter(raw)
        CATCH:
            // å®¹é”™å¤„ç†ï¼šå¿½ç•¥æ ¼å¼é”™è¯¯çš„ Skill
            pass
        
        RETURN {
            skill,
            frontmatter,
            metadata: resolveOpenClawMetadata(frontmatter),
            invocation: resolveSkillInvocationPolicy(frontmatter),
        }
    })
}

// ============================================
// å…ƒæ•°æ®è§£æç®—æ³•
// ============================================
FUNCTION resolveOpenClawMetadata(frontmatter: ParsedSkillFrontmatter): OpenClawSkillMetadata | undefined {
    // 1. æå–åŸå§‹ metadata å­—ç¬¦ä¸²
    raw = getFrontmatterValue(frontmatter, "metadata")
    IF NOT raw: RETURN undefined
    
    TRY:
        // 2. ä½¿ç”¨ JSON5 è§£æï¼ˆæ”¯æŒæ³¨é‡Šå’Œå°¾éšé€—å·ï¼‰
        parsed = JSON5.parse(raw)
        IF NOT parsed OR typeof parsed !== "object": RETURN undefined
        
        // 3. å¤šé”®å€™é€‰æŸ¥æ‰¾ï¼ˆå‘åå…¼å®¹ï¼‰
        const metadataRawCandidates = [MANIFEST_KEY, ...LEGACY_MANIFEST_KEYS]
        for (const key of metadataRawCandidates) {
            if (parsed[key] && typeof parsed[key] === "object") {
                metadataRaw = parsed[key]
                break
            }
        }
        
        IF NOT metadataRaw: RETURN undefined
        
        // 4. ç»“æ„åŒ–æå–
        RETURN {
            always: metadataRaw.always,           // å¼ºåˆ¶å¯ç”¨æ ‡å¿—
            skillKey: metadataRaw.skillKey,       // å”¯ä¸€æ ‡è¯†
            primaryEnv: metadataRaw.primaryEnv,   // ä¸»ç¯å¢ƒå˜é‡
            os: normalizeStringList(metadataRaw.os),  // æ”¯æŒå¹³å°
            requires: {
                bins: normalizeStringList(requiresRaw?.bins),     // å¿…éœ€äºŒè¿›åˆ¶
                anyBins: normalizeStringList(requiresRaw?.anyBins), // ä»»ä¸€äºŒè¿›åˆ¶
                env: normalizeStringList(requiresRaw?.env),       // å¿…éœ€ç¯å¢ƒå˜é‡
                config: normalizeStringList(requiresRaw?.config)  // å¿…éœ€é…ç½®
            },
            install: parseInstallSpecs(metadataRaw.install)  // å®‰è£…è§„èŒƒ
        }
    CATCH:
        RETURN undefined
}

// ============================================
// æ„å»º Skill å¿«ç…§
// ============================================
FUNCTION buildWorkspaceSkillSnapshot(
    workspaceDir: string, 
    opts?: SnapshotOptions
): SkillSnapshot {
    skillEntries = opts?.entries ?? loadSkillEntries(workspaceDir, opts)
    
    // è¿‡æ»¤ç¬¦åˆæ¡ä»¶çš„ Skill
    eligible = filterSkillEntries(
        skillEntries, 
        opts?.config, 
        opts?.skillFilter, 
        opts?.eligibility
    )
    
    // è¿‡æ»¤å¯ç”¨äºæ¨¡å‹æç¤ºçš„ Skill
    promptEntries = eligible.filter(entry => 
        entry.invocation?.disableModelInvocation !== true
    )
    
    resolvedSkills = promptEntries.map(entry => entry.skill)
    remoteNote = opts?.eligibility?.remote?.note?.trim()
    
    // æ„å»ºæç¤ºæ–‡æœ¬
    prompt = [remoteNote, formatSkillsForPrompt(resolvedSkills)]
        .filter(Boolean)
        .join("\n")
    
    RETURN {
        prompt,
        skills: eligible.map(entry => ({ 
            name: entry.skill.name, 
            primaryEnv: entry.metadata?.primaryEnv 
        })),
        resolvedSkills,
        version: opts?.snapshotVersion,
    }
}

// ============================================
// æ„å»ºå‘½ä»¤è§„èŒƒï¼ˆç”¨äº Discord/Slack ç­‰å¹³å°ï¼‰
// ============================================
FUNCTION buildWorkspaceSkillCommandSpecs(
    workspaceDir: string, 
    opts?: CommandSpecOptions
): SkillCommandSpec[] {
    skillEntries = opts?.entries ?? loadSkillEntries(workspaceDir, opts)
    eligible = filterSkillEntries(skillEntries, opts?.config, opts?.skillFilter, opts?.eligibility)
    
    // åªä¿ç•™ç”¨æˆ·å¯è°ƒç”¨çš„ Skill
    userInvocable = eligible.filter(entry => 
        entry.invocation?.userInvocable !== false
    )
    
    used = new Set<string>()
    FOR reserved IN opts?.reservedNames ?? []: 
        used.add(reserved.toLowerCase())
    
    specs = []
    FOR entry IN userInvocable:
        rawName = entry.skill.name
        base = sanitizeSkillCommandName(rawName)
        
        // ç¡®ä¿å”¯ä¸€æ€§
        unique = resolveUniqueSkillCommandName(base, used)
        used.add(unique.toLowerCase())
        
        // æˆªæ–­æè¿°ï¼ˆDiscord é™åˆ¶ 100 å­—ç¬¦ï¼‰
        rawDescription = entry.skill.description?.trim() || rawName
        description = rawDescription.length > 100 
            ? rawDescription.slice(0, 99) + "â€¦" 
            : rawDescription
        
        // è§£æå‘½ä»¤åˆ†å‘é…ç½®
        dispatch = parseDispatchConfig(entry.frontmatter)
        
        specs.push({ 
            name: unique, 
            skillName: rawName, 
            description, 
            ...(dispatch ? { dispatch } : {}) 
        })
    
    RETURN specs
}

// å‘½ä»¤åè§„èŒƒåŒ–
FUNCTION sanitizeSkillCommandName(raw: string): string {
    normalized = raw
        .toLowerCase()
        .replace(/[^a-z0-9_]+/g, "_")
        .replace(/_+/g, "_")
        .replace(/^_+|_+$/g, "")
    RETURN normalized.slice(0, 32) || "skill"
}
```

### ç›®å½•æ‰«æè§„åˆ™

```
skills/
â”œâ”€â”€ skill-a.md              # ç›´æ¥å­ç›®å½•ä¸­çš„ .md æ–‡ä»¶
â”œâ”€â”€ skill-b/
â”‚   â””â”€â”€ SKILL.md            # å­ç›®å½•ä¸­çš„ SKILL.md
â””â”€â”€ category/
    â””â”€â”€ skill-c/
        â””â”€â”€ SKILL.md        # åµŒå¥—å­ç›®å½•ä¸­çš„ SKILL.md
```

æ‰«æå™¨ä¼šé€’å½’æŸ¥æ‰¾ï¼š
- ç›´æ¥å­ç›®å½•ä¸­çš„ `.md` æ–‡ä»¶
- ä»»æ„å±‚çº§å­ç›®å½•ä¸­çš„ `SKILL.md` æ–‡ä»¶

### å…³é”®åŠ è½½æ–¹æ³•

| æ–¹æ³•å | æè¿° | æ–‡ä»¶è·¯å¾„ |
|-------|------|---------|
| `loadSkillEntries` | åŠ è½½æ‰€æœ‰ Skill | `src/agents/skills/workspace.ts` |
| `parseFrontmatter` | è§£æ YAML Frontmatter | `src/agents/skills/frontmatter.ts` |
| `resolveOpenClawMetadata` | è§£æ OpenClaw æ‰©å±•å…ƒæ•°æ® | `src/agents/skills/frontmatter.ts` |
| `shouldIncludeSkill` | åˆ¤å®š Skill æ˜¯å¦å¯ç”¨ | `src/agents/skills/config.ts` |
| `buildWorkspaceSkillSnapshot` | æ„å»º Skill å¿«ç…§ | `src/agents/skills/workspace.ts` |

---

## Skill æ‰§è¡Œæµç¨‹

### å‘½ä»¤è°ƒç”¨æ–¹å¼

```
# æ–¹å¼ 1ï¼šä¼ ç»Ÿæ ¼å¼
/skill:github list prs

# æ–¹å¼ 2ï¼šç›´æ¥å‘½ä»¤æ ¼å¼ï¼ˆæ¨èï¼‰
/github list prs
```

### æ‰§è¡Œæµç¨‹è¯¦è§£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Skill æ‰§è¡Œæµç¨‹                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ç”¨æˆ·è¾“å…¥  â”‚â”€â”€â–¶â”‚ å‘½ä»¤è§£æ  â”‚â”€â”€â–¶â”‚ æŠ€èƒ½åŒ¹é…  â”‚â”€â”€â–¶â”‚ èµ„æ ¼æ£€æŸ¥  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                    â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ç»“æœè¿”å›  â”‚â—€â”€â”€â”‚ ç»“æœå¤„ç†  â”‚â—€â”€â”€â”‚ æ‰§è¡Œç›‘æ§  â”‚â—€â”€â”€â”‚ æŒ‡ä»¤ç”Ÿæˆ  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¡¹ç›®ç»ç†è§†è§’çš„æ‰§è¡Œæµç¨‹

å°† Skill æ‰§è¡Œè¿‡ç¨‹ç±»æ¯”ä¸ºé¡¹ç›®ç»ç†ç®¡ç†é¡¹ç›®çš„å®Œæ•´æµç¨‹ï¼š

1. **å‘½ä»¤è§£æ**ï¼šç†è§£ç”¨æˆ·çš„"å·¥ä½œéœ€æ±‚"ï¼ˆç†è§£å®¢æˆ·éœ€æ±‚ï¼‰
2. **æŠ€èƒ½åŒ¹é…**ï¼šæ‰¾åˆ°æœ€é€‚åˆçš„"å‘˜å·¥"ï¼ˆé€‰æ‹©å›¢é˜Ÿæˆå‘˜ï¼‰
3. **èµ„æ ¼æ£€æŸ¥**ï¼šç¡®è®¤"å‘˜å·¥"æ˜¯å¦å…·å¤‡å·¥ä½œæ¡ä»¶ï¼ˆèµ„è´¨å®¡æ ¸ï¼‰
4. **ç¯å¢ƒå‡†å¤‡**ï¼šä¸º Skill æä¾›"å·¥ä½œç¯å¢ƒ"ï¼ˆå‡†å¤‡å·¥ä½œç©ºé—´ï¼‰
5. **æŒ‡ä»¤ç”Ÿæˆ**ï¼šä¸º AI ç”Ÿæˆ"å·¥ä½œæŒ‡ç¤º"ï¼ˆåˆ†é…å…·ä½“ä»»åŠ¡ï¼‰
6. **æ‰§è¡Œç›‘æ§**ï¼šè·Ÿè¸ª Skill çš„"å·¥ä½œè¿›åº¦"ï¼ˆç›‘æ§é¡¹ç›®è¿›åº¦ï¼‰
7. **ç»“æœå¤„ç†**ï¼šæ•´ç†å¹¶è¿”å›"å·¥ä½œæˆæœ"ï¼ˆéªŒæ”¶å¹¶äº¤ä»˜ï¼‰

### æ‰§è¡Œå¼•æ“ä¼ªä»£ç 

```typescript
// ============================================
// å¤„ç† Skill è°ƒç”¨è¯·æ±‚
// ============================================
FUNCTION handleInvoke(payload: InvokePayload, client: GatewayClient, skillBins: SkillBinsCache): void {
    // è§£æè¯·æ±‚
    invokeId = payload.invokeId
    bin = payload.bin
    argv = payload.argv ?? []
    cwd = payload.cwd
    env = payload.env ?? {}
    timeoutMs = payload.timeoutMs ?? 60_000
    
    // æ£€æŸ¥æ‰§è¡Œæƒé™
    approvals = resolveExecApprovals({ bin, argv, cwd, env })
    
    // å¤„ç†éœ€è¦ç”¨æˆ·æ‰¹å‡†çš„æƒ…å†µ
    IF approvals.requiresUserApproval:
        client.sendNodeEvent({
            type: "approval_required",
            invokeId,
            message: approvals.approvalMessage,
        })
        RETURN
    
    // ç¡®å®šæ‰§è¡Œæ–¹å¼
    execMode = determineExecMode(bin, skillBins)
    
    SWITCH execMode:
        CASE "local":
            result = await runCommandLocally({ bin, argv, cwd, env, timeoutMs })
        CASE "remote_macos":
            result = await runViaMacAppExecHost({ bin, argv, cwd, env, timeoutMs, client })
        DEFAULT:
            result = { code: 1, stdout: "", stderr: "Unsupported execution mode" }
    
    // å‘é€ç»“æœ
    client.sendInvokeResult({
        invokeId,
        ...result,
    })
}

// ============================================
// æœ¬åœ°å‘½ä»¤æ‰§è¡Œï¼ˆå¸¦è¶…æ—¶æ§åˆ¶å’Œä¿¡å·å¤„ç†ï¼‰
// ============================================
FUNCTION runCommandLocally(params: RunParams): Promise<ExecResult> {
    { bin, argv, cwd, env, timeoutMs } = params
    
    RETURN new Promise((resolve) => {
        // 1. ç¯å¢ƒå‡†å¤‡
        const resolvedEnv = env ? { ...process.env, ...env } : { ...process.env }
        
        // 2. è¿›ç¨‹åˆ›å»º
        child = spawn(bin, argv, {
            cwd,
            env: resolvedEnv,
            stdio: ["pipe", "pipe", "pipe"],
        })
        
        stdout = ""
        stderr = ""
        settled = false
        
        // 3. æ•°æ®æµå¤„ç†
        child.stdout.on("data", (data) => {
            stdout += data.toString()
        })
        
        child.stderr.on("data", (data) => {
            stderr += data.toString()
        })
        
        // 4. è¶…æ—¶å®šæ—¶å™¨è®¾ç½®
        timer = setTimeout(() => {
            IF NOT settled:
                settled = true
                child.kill("SIGKILL")  // å¼ºåˆ¶ç»ˆæ­¢
                resolve({ 
                    code: 124, 
                    stdout, 
                    stderr: stderr + "\n[Command timed out]" 
                })
        }, timeoutMs)
        
        // 5. è¿›ç¨‹ç»“æŸå¤„ç†
        child.on("close", (code, signal) => {
            IF settled: RETURN
            settled = true
            clearTimeout(timer)
            resolve({ code: code ?? 1, stdout, stderr, signal })
        })
        
        // 6. é”™è¯¯å¤„ç†
        child.on("error", (err) => {
            IF settled: RETURN
            settled = true
            clearTimeout(timer)
            resolve({ 
                code: 1, 
                stdout, 
                stderr: stderr + "\n" + err.message 
            })
        })
    })
}

// ============================================
// ä¿¡å·æ¡¥æ¥æœºåˆ¶ï¼ˆçˆ¶å­è¿›ç¨‹ä¿¡å·åŒæ­¥ï¼‰
// ============================================
FUNCTION attachChildProcessBridge(child, options) {
    // å¹³å°é€‚é…çš„ä¿¡å·åˆ—è¡¨
    defaultSignals = process.platform === "win32"
        ? ["SIGTERM", "SIGINT", "SIGBREAK"]
        : ["SIGTERM", "SIGINT", "SIGHUP", "SIGQUIT"]
    
    listeners = new Map()
    
    // ä¸ºæ¯ä¸ªä¿¡å·æ³¨å†Œè½¬å‘ç›‘å¬å™¨
    FOR signal IN signals:
        listener = () => {
            onSignal?.(signal)
            TRY:
                child.kill(signal)  // è½¬å‘ä¿¡å·ç»™å­è¿›ç¨‹
            CATCH: 
                // å¿½ç•¥é”™è¯¯
        }
        
        process.on(signal, listener)
        listeners.set(signal, listener)
    
    // æ¸…ç†å‡½æ•°
    detach = () => {
        FOR [signal, listener] OF listeners:
            process.off(signal, listener)
        listeners.clear()
    }
    
    // è‡ªåŠ¨æ¸…ç†ç»‘å®š
    child.once("exit", detach)
    child.once("error", detach)
    
    RETURN { detach }
}

// ============================================
// é€šè¿‡ macOS App æ‰§è¡Œï¼ˆè¿œç¨‹æ‰§è¡Œï¼‰
// ============================================
FUNCTION runViaMacAppExecHost(params: MacExecParams): Promise<ExecResult> {
    { bin, argv, cwd, env, timeoutMs, client } = params
    
    RETURN new Promise((resolve) => {
        // æ„å»ºæ‰§è¡Œè¯·æ±‚
        request = {
            type: "exec",
            id: generateId(),
            bin,
            args: argv,
            cwd,
            env,
            timeoutMs,
        }
        
        // ç­‰å¾…æ‰§è¡Œç»“æœ
        timeout = setTimeout(() => {
            resolve({ 
                code: 124, 
                stdout: "", 
                stderr: "[Remote execution timed out]" 
            })
        }, timeoutMs + 5000)  // é¢å¤– 5 ç§’ç½‘ç»œå»¶è¿Ÿç¼“å†²
        
        // ç›‘å¬ç»“æœ
        once(client, "exec_result", (result) => {
            clearTimeout(timeout)
            IF result.id === request.id:
                resolve({ 
                    code: result.code, 
                    stdout: result.stdout, 
                    stderr: result.stderr 
                })
        })
        
        // å‘é€æ‰§è¡Œè¯·æ±‚
        client.sendToExecHost(request)
    })
}
```

### åˆ†å‘ç±»å‹

å½“å‰æ”¯æŒçš„åˆ†å‘ç±»å‹ï¼š

| ç±»å‹ | è¯´æ˜ | é…ç½®ç¤ºä¾‹ |
|------|------|----------|
| `tool` | è°ƒç”¨æŒ‡å®šå·¥å…· | `command-dispatch: tool`<br>`command-tool: myTool` |

### å‚æ•°ä¼ é€’æœºåˆ¶

```yaml
# SKILL.md
command-dispatch: tool
command-tool: github-cli
command-arg-mode: raw
```

å½“ç”¨æˆ·è¾“å…¥ `/github list prs` æ—¶ï¼š
- `command-tool` æŒ‡å®šè°ƒç”¨çš„å·¥å…·å
- `command-arg-mode: raw` è¡¨ç¤ºå°† `list prs` ä½œä¸ºåŸå§‹å‚æ•°ä¼ é€’

### å‚æ•°ä¼ é€’æ–¹å¼

OpenClaw æ”¯æŒå¤šç§å‚æ•°ä¼ é€’æ–¹å¼ï¼š

| æ–¹å¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **å‘½ä»¤è¡Œå‚æ•°** | å°†å‚æ•°ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°ä¼ é€’ | ç®€å•å‚æ•° |
| **ç¯å¢ƒå˜é‡** | é€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’å‚æ•° | æ•æ„Ÿä¿¡æ¯ |
| **æ ‡å‡†è¾“å…¥** | é€šè¿‡æ ‡å‡†è¾“å…¥æµä¼ é€’å‚æ•° | å¤§é‡æ•°æ® |
| **é…ç½®æ–‡ä»¶** | é€šè¿‡ä¸´æ—¶é…ç½®æ–‡ä»¶ä¼ é€’ | å¤æ‚å‚æ•° |

### å…³é”®æ‰§è¡Œæ–¹æ³•

| æ–¹æ³•å | æè¿° | æ–‡ä»¶è·¯å¾„ |
|-------|------|---------|
| `runNodeHost` | å¯åŠ¨ Node Hostï¼Œå¤„ç†æŠ€èƒ½æ‰§è¡Œè¯·æ±‚ | `src/node-host/runner.ts` |
| `handleInvoke` | å¤„ç†æŠ€èƒ½æ‰§è¡Œè¯·æ±‚ | `src/node-host/runner.ts` |
| `runCommand` | æ‰§è¡Œå‘½ä»¤å¹¶æ”¶é›†ç»“æœ | `src/node-host/runner.ts` |
| `runViaMacAppExecHost` | é€šè¿‡ macOS app æ‰§è¡Œå‘½ä»¤ | `src/node-host/runner.ts` |
| `resolveExecApprovals` | è§£ææ‰§è¡Œæƒé™ | `src/infra/exec-approvals.ts` |
| `sendInvokeResult` | è¿”å›æ‰§è¡Œç»“æœ | `src/node-host/runner.ts` |
| `sendNodeEvent` | å‘é€æ‰§è¡Œäº‹ä»¶ | `src/node-host/runner.ts` |

---

## Skill èµ„æ ¼åˆ¤å®šç®—æ³•

### åˆ¤å®šæµç¨‹ï¼ˆä¼ªä»£ç ï¼‰

```typescript
// ============================================
// ä¸»åˆ¤å®šå‡½æ•°ï¼šåˆ¤æ–­ Skill æ˜¯å¦åº”è¯¥è¢«åŒ…å«
// ============================================
FUNCTION shouldIncludeSkill(
    entry: SkillEntry, 
    config?: OpenClawConfig, 
    eligibility?: SkillEligibilityContext
): boolean {
    skillKey = resolveSkillKey(entry.skill, entry)
    skillConfig = resolveSkillConfig(config, skillKey)
    allowBundled = normalizeAllowlist(config?.skills?.allowBundled)
    osList = entry.metadata?.os ?? []
    remotePlatforms = eligibility?.remote?.platforms ?? []

    // 1. æ£€æŸ¥æ˜¯å¦è¢«æ˜¾å¼ç¦ç”¨
    IF skillConfig?.enabled === false:
        RETURN false

    // 2. æ£€æŸ¥ç™½åå•é™åˆ¶ï¼ˆä»…é’ˆå¯¹æ†ç»‘ Skillï¼‰
    IF NOT isBundledSkillAllowed(entry, allowBundled):
        RETURN false

    // 3. æ£€æŸ¥æ“ä½œç³»ç»Ÿå…¼å®¹æ€§
    IF osList.length > 0 AND 
       NOT osList.includes(currentPlatform) AND
       NOT remotePlatforms.some(p => osList.includes(p)):
        RETURN false

    // 4. æ£€æŸ¥ always æ ‡å¿—ï¼ˆè·³è¿‡ä¾èµ–æ£€æŸ¥ï¼‰
    IF entry.metadata?.always === true:
        RETURN true

    // 5. æ£€æŸ¥å¿…éœ€çš„äºŒè¿›åˆ¶æ–‡ä»¶
    requiredBins = entry.metadata?.requires?.bins ?? []
    FOR EACH bin IN requiredBins:
        IF NOT hasBinary(bin) AND NOT eligibility?.remote?.hasBin(bin):
            RETURN false

    // 6. æ£€æŸ¥ä»»ä¸€å¿…éœ€çš„äºŒè¿›åˆ¶æ–‡ä»¶
    requiredAnyBins = entry.metadata?.requires?.anyBins ?? []
    IF requiredAnyBins.length > 0:
        IF NOT (requiredAnyBins.some(bin => hasBinary(bin)) OR 
                eligibility?.remote?.hasAnyBin(requiredAnyBins)):
            RETURN false

    // 7. æ£€æŸ¥å¿…éœ€çš„ç¯å¢ƒå˜é‡
    requiredEnv = entry.metadata?.requires?.env ?? []
    FOR EACH envName IN requiredEnv:
        IF process.env[envName] EXISTS:
            CONTINUE
        IF skillConfig?.env?.[envName] EXISTS:
            CONTINUE
        IF skillConfig?.apiKey AND entry.metadata?.primaryEnv === envName:
            CONTINUE
        RETURN false

    // 8. æ£€æŸ¥å¿…éœ€çš„é…ç½®è·¯å¾„
    requiredConfig = entry.metadata?.requires?.config ?? []
    FOR EACH configPath IN requiredConfig:
        IF NOT isConfigPathTruthy(config, configPath):
            RETURN false

    RETURN true
}

// ============================================
// æ£€æŸ¥ç³»ç»Ÿ PATH ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šäºŒè¿›åˆ¶æ–‡ä»¶
// ============================================
FUNCTION hasBinary(bin: string): boolean {
    pathEnv = process.env.PATH ?? ""
    parts = pathEnv.split(path.delimiter).filter(Boolean)
    
    FOR EACH part IN parts:
        candidate = path.join(part, bin)
        TRY:
            fs.accessSync(candidate, fs.constants.X_OK)
            RETURN true
        CATCH:
            CONTINUE
    
    RETURN false
}

// ============================================
// æ£€æŸ¥é…ç½®è·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”ä¸ºçœŸå€¼
// ============================================
FUNCTION isConfigPathTruthy(config: any, pathStr: string): boolean {
    parts = pathStr.split(".")
    current = config
    
    FOR EACH part IN parts:
        IF current === null OR current === undefined:
            RETURN false
        current = current[part]
    
    RETURN Boolean(current)
}
```

### åˆ¤å®šæ¡ä»¶è¯¦è§£

| æ¡ä»¶ | å­—æ®µ | è¯´æ˜ |
|------|------|------|
| å¯ç”¨çŠ¶æ€ | `enabled` | ç”¨æˆ·å¯æ˜¾å¼ç¦ç”¨ Skill |
| ç™½åå• | `allowBundled` | æ§åˆ¶å“ªäº›å†…ç½® Skill å¯ç”¨ |
| å¹³å° | `os` | é™åˆ¶ç‰¹å®šæ“ä½œç³»ç»Ÿ |
| äºŒè¿›åˆ¶æ–‡ä»¶ | `requires.bins` | å¿…é¡»å…¨éƒ¨å­˜åœ¨çš„å‘½ä»¤ |
| å¯é€‰äºŒè¿›åˆ¶ | `requires.anyBins` | è‡³å°‘ä¸€ä¸ªå­˜åœ¨çš„å‘½ä»¤ |
| ç¯å¢ƒå˜é‡ | `requires.env` | å¿…é¡»è®¾ç½®çš„ç¯å¢ƒå˜é‡ |
| é…ç½®è·¯å¾„ | `requires.config` | å¿…é¡»å­˜åœ¨çš„é…ç½®é¡¹ |
| å§‹ç»ˆåŒ…å« | `always` | å¿½ç•¥å…¶ä»–æ£€æŸ¥ |

---

## Skill å®‰è£…ç³»ç»Ÿ

### å®‰è£…ç±»å‹

| ç±»å‹ | è¯´æ˜ | å¿…éœ€å­—æ®µ |
|------|------|----------|
| `brew` | Homebrew å®‰è£… | `formula` |
| `node` | npm/yarn/pnpm å…¨å±€å®‰è£… | `package` |
| `go` | Go install å®‰è£… | `module` |
| `uv` | uv tool å®‰è£… | `package` |
| `download` | ä¸‹è½½å¹¶è§£å‹ | `url` |

### å®‰è£…æµç¨‹ï¼ˆä¼ªä»£ç ï¼‰

```typescript
// ============================================
// ä¸»å®‰è£…å‡½æ•°
// ============================================
FUNCTION installSkill(params: InstallParams): Promise<InstallResult> {
    // è¶…æ—¶å€¼è§„èŒƒåŒ–ï¼šé»˜è®¤5åˆ†é’Ÿï¼Œæœ€å°1ç§’ï¼Œæœ€å¤§15åˆ†é’Ÿ
    timeoutMs = CLAMP(params.timeoutMs ?? 300_000, 1_000, 900_000)
    workspaceDir = resolveUserPath(params.workspaceDir)
    
    // åŠ è½½æ‰€æœ‰ Skill æ¡ç›®
    entries = loadWorkspaceSkillEntries(workspaceDir)
    entry = entries.find(item => item.skill.name === params.skillName)
    
    IF NOT entry:
        RETURN { ok: false, message: `Skill not found: ${params.skillName}`, ... }
    
    // æŸ¥æ‰¾å®‰è£…è§„èŒƒ
    spec = findInstallSpec(entry, params.installId)
    
    // å®‰å…¨æ‰«æ
    warnings = await collectSkillInstallScanWarnings(entry)
    
    IF NOT spec:
        RETURN withWarnings({ 
            ok: false, 
            message: `Installer not found: ${params.installId}`, 
            ... 
        }, warnings)
    
    // å¤„ç†ä¸‹è½½ç±»å‹
    IF spec.kind === "download":
        RETURN withWarnings(
            await installDownloadSpec({ entry, spec, timeoutMs }), 
            warnings
        )
    
    // æ„å»ºå®‰è£…å‘½ä»¤
    prefs = resolveSkillsInstallPreferences(params.config)
    command = buildInstallCommand(spec, prefs)
    
    IF command.error:
        RETURN withWarnings({ 
            ok: false, 
            message: command.error, 
            ... 
        }, warnings)
    
    // æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–å·¥å…·
    IF spec.kind === "brew" AND NOT hasBinary("brew"):
        RETURN withWarnings({ 
            ok: false, 
            message: "brew not installed", 
            ... 
        }, warnings)
    
    IF spec.kind === "uv" AND NOT hasBinary("uv"):
        IF hasBinary("brew"):
            // å°è¯•è‡ªåŠ¨å®‰è£… uv
            brewResult = await runCommandWithTimeout(
                ["brew", "install", "uv"], 
                { timeoutMs }
            )
            IF brewResult.code !== 0:
                RETURN withWarnings({ 
                    ok: false, 
                    message: "Failed to install uv (brew)", 
                    ... 
                }, warnings)
        ELSE:
            RETURN withWarnings({ 
                ok: false, 
                message: "uv not installed (install via brew)", 
                ... 
            }, warnings)
    
    // æ‰§è¡Œå®‰è£…
    result = await runCommandWithTimeout(command.argv, { timeoutMs, env })
    
    success = result.code === 0
    RETURN withWarnings({
        ok: success,
        message: success ? "Installed" : formatInstallFailureMessage(result),
        stdout: result.stdout.trim(),
        stderr: result.stderr.trim(),
        code: result.code,
    }, warnings)
}

// ============================================
// ä¸‹è½½ç±»å‹å®‰è£…
// ============================================
FUNCTION installDownloadSpec(params: DownloadParams): Promise<InstallResult> {
    { entry, spec, timeoutMs } = params
    url = spec.url?.trim()
    
    IF NOT url:
        RETURN { ok: false, message: "missing download url", ... }
    
    // æå–æ–‡ä»¶å
    TRY:
        parsed = new URL(url)
        filename = path.basename(parsed.pathname)
    CATCH:
        filename = path.basename(url)
    
    IF NOT filename: filename = "download"
    
    targetDir = resolveDownloadTargetDir(entry, spec)
    await ensureDir(targetDir)
    
    archivePath = path.join(targetDir, filename)
    
    // ä¸‹è½½æ–‡ä»¶
    TRY:
        result = await downloadFile(url, archivePath, timeoutMs)
        downloaded = result.bytes
    CATCH err:
        RETURN { ok: false, message: err.message, ... }
    
    // åˆ¤æ–­æ˜¯å¦éœ€è¦è§£å‹
    archiveType = resolveArchiveType(spec, filename)
    shouldExtract = spec.extract ?? Boolean(archiveType)
    
    IF NOT shouldExtract:
        RETURN { 
            ok: true, 
            message: `Downloaded to ${archivePath}`, 
            stdout: `downloaded=${downloaded}`, 
            ... 
        }
    
    IF NOT archiveType:
        RETURN { 
            ok: false, 
            message: "extract requested but archive type could not be detected", 
            ... 
        }
    
    // è§£å‹
    extractResult = await extractArchive({ 
        archivePath, 
        archiveType, 
        targetDir, 
        stripComponents: spec.stripComponents, 
        timeoutMs 
    })
    
    success = extractResult.code === 0
    RETURN {
        ok: success,
        message: success 
            ? `Downloaded and extracted to ${targetDir}` 
            : formatInstallFailureMessage(extractResult),
        stdout: extractResult.stdout.trim(),
        stderr: extractResult.stderr.trim(),
        code: extractResult.code,
    }
}

// ============================================
// æ„å»ºå®‰è£…å‘½ä»¤
// ============================================
FUNCTION buildInstallCommand(spec: SkillInstallSpec, prefs: InstallPrefs): CommandResult {
    SWITCH spec.kind:
        CASE "brew":
            RETURN { argv: ["brew", "install", spec.formula] }
        
        CASE "node":
            nodeManager = prefs.nodeManager ?? "npm"
            RETURN { argv: [nodeManager, "install", "-g", spec.package] }
        
        CASE "go":
            RETURN { argv: ["go", "install", spec.module] }
        
        CASE "uv":
            RETURN { argv: ["uv", "tool", "install", spec.package] }
        
        DEFAULT:
            RETURN { error: `Unsupported install kind: ${spec.kind}` }
}
```

### å®‰è£…é…ç½®ç¤ºä¾‹

```json5
{
  "openclaw": {
    "install": [
      // Homebrew å®‰è£…
      {
        "kind": "brew",
        "formula": "gh",
        "bins": ["gh"],
        "os": ["darwin", "linux"]
      },
      
      // Node.js åŒ…å®‰è£…
      {
        "kind": "node",
        "package": "@anthropic-ai/claude-code",
        "bins": ["claude"],
        "label": "Install via npm"
      },
      
      // Go æ¨¡å—å®‰è£…
      {
        "kind": "go",
        "module": "github.com/cli/cli/v2/cmd/gh@latest",
        "bins": ["gh"]
      },
      
      // uv å·¥å…·å®‰è£…
      {
        "kind": "uv",
        "package": "ruff",
        "bins": ["ruff"]
      },
      
      // ä¸‹è½½å®‰è£…
      {
        "kind": "download",
        "url": "https://github.com/user/repo/releases/download/v1.0.0/tool.tar.gz",
        "archive": "tar.gz",
        "extract": true,
        "stripComponents": 1,
        "targetDir": "bin",
        "bins": ["tool"],
        "os": ["darwin"]
      }
    ]
  }
}
```

---

## Skill å®‰å…¨æœºåˆ¶

### å®‰å…¨æ‰«æè§„åˆ™

```typescript
const SECURITY_RULES = [
  {
    ruleId: "dangerous-exec",
    severity: "critical",
    message: "æ£€æµ‹åˆ° shell å‘½ä»¤æ‰§è¡Œ (child_process)",
    pattern: /\b(exec|execSync|spawn|spawnSync|execFile|execFileSync)\s*\(/,
    requiresContext: /child_process/,
  },
  {
    ruleId: "dynamic-code-execution",
    severity: "critical",
    message: "æ£€æµ‹åˆ°åŠ¨æ€ä»£ç æ‰§è¡Œ",
    pattern: /\beval\s*\(|new\s+Function\s*\(/,
  },
  {
    ruleId: "env-harvesting",
    severity: "critical",
    message: "ç¯å¢ƒå˜é‡è®¿é—®ç»“åˆç½‘ç»œå‘é€",
    pattern: /process\.env/,
    requiresContext: /\bfetch\b|\bpost\b|http\.request/i,
  },
  {
    ruleId: "suspicious-network",
    severity: "high",
    message: "æ£€æµ‹åˆ°å¯ç–‘ç½‘ç»œè¯·æ±‚",
    pattern: /\bfetch\s*\(\s*['"`][^'"`]*['"`]/,
  },
  {
    ruleId: "file-system-access",
    severity: "medium",
    message: "æ£€æµ‹åˆ°æ–‡ä»¶ç³»ç»Ÿè®¿é—®",
    pattern: /\bfs\.[a-zA-Z]+\s*\(/,
  },
];
```

### æ‰«ææµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. è¯»å– Skill æ–‡ä»¶å†…å®¹                                        â”‚
â”‚     â†“                                                       â”‚
â”‚  2. é€è¡ŒåŒ¹é…å®‰å…¨è§„åˆ™                                          â”‚
â”‚     â†“                                                       â”‚
â”‚  3. æ£€æŸ¥ä¸Šä¸‹æ–‡ï¼ˆrequiresContextï¼‰                             â”‚
â”‚     â†“                                                       â”‚
â”‚  4. ç”Ÿæˆè­¦å‘Šåˆ—è¡¨                                              â”‚
â”‚     â†“                                                       â”‚
â”‚  5. æ ¹æ®ä¸¥é‡çº§åˆ«å†³å®šæ˜¯å¦é˜»æ­¢å®‰è£…                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‰§è¡Œæ—¶å®‰å…¨æœºåˆ¶

| æœºåˆ¶ | è¯´æ˜ | å®ç°ä½ç½® |
|------|------|----------|
| **æƒé™æ£€æŸ¥** | æ£€æŸ¥ Skill æ˜¯å¦æœ‰æ‰§è¡Œæƒé™ | `src/infra/exec-approvals.ts` |
| **å…è®¸åˆ—è¡¨éªŒè¯** | æ£€æŸ¥å‘½ä»¤æ˜¯å¦åœ¨å…è®¸åˆ—è¡¨ä¸­ | `src/infra/exec-approvals.ts` |
| **ç”¨æˆ·æ‰¹å‡†** | æ•æ„Ÿæ“ä½œè¦æ±‚ç”¨æˆ·æ‰¹å‡† | `src/infra/exec-approvals.ts` |
| **æ²™ç®±éš”ç¦»** | åœ¨æ²™ç®±ä¸­æ‰§è¡Œ Skill | `src/node-host/runner.ts` |

### å®‰å…¨å»ºè®®

1. **å®¡æŸ¥ç¬¬ä¸‰æ–¹ Skill**ï¼šå®‰è£…å‰ä»”ç»†é˜…è¯»ä»£ç 
2. **æœ€å°æƒé™åŸåˆ™**ï¼šåªå®‰è£…å¿…è¦çš„ Skill
3. **å®šæœŸæ£€æŸ¥**ï¼šæ›´æ–° Skill æ—¶é‡æ–°å®¡æŸ¥
4. **ä½¿ç”¨å®˜æ–¹æº**ï¼šä¼˜å…ˆä½¿ç”¨å®˜æ–¹æˆ–å¯ä¿¡æ¥æºçš„ Skill

---

## Skill é…ç½®ç³»ç»Ÿ

### é…ç½®æ–‡ä»¶ä½ç½®

```
~/.openclaw/
â”œâ”€â”€ config.json           # ä¸»é…ç½®æ–‡ä»¶
â””â”€â”€ skills/
    â””â”€â”€ <skill-name>/     # Skill ç‰¹å®šæ–‡ä»¶
```

### é…ç½® Schema

```typescript
interface SkillsConfig {
  // å†…ç½® Skill ç™½åå•
  allowBundled?: string[];
  
  // åŠ è½½é…ç½®
  load?: {
    extraDirs?: string[];    // é¢å¤–çš„ Skill ç›®å½•
    watch?: boolean;         // æ˜¯å¦å¯ç”¨æ–‡ä»¶ç›‘è§†
    watchDebounceMs?: number; // ç›‘è§†é˜²æŠ–æ—¶é—´
  };
  
  // å®‰è£…åå¥½
  install?: {
    nodeManager?: "npm" | "yarn" | "pnpm";
  };
  
  // æ¯ä¸ª Skill çš„é…ç½®
  entries?: {
    [skillKey: string]: SkillConfig;
  };
}

interface SkillConfig {
  enabled?: boolean;                    // æ˜¯å¦å¯ç”¨
  apiKey?: string;                      // API å¯†é’¥ï¼ˆæ³¨å…¥åˆ° primaryEnvï¼‰
  env?: Record<string, string>;         // ç¯å¢ƒå˜é‡
  config?: Record<string, unknown>;     // è‡ªå®šä¹‰é…ç½®
}
```

### é…ç½®ç¤ºä¾‹

```json5
{
  "skills": {
    // ç™½åå•ï¼šåªå…è®¸è¿™äº›å†…ç½® Skill
    "allowBundled": ["github", "summarize", "weather"],
    
    // åŠ è½½é…ç½®
    "load": {
      "extraDirs": [
        "/path/to/custom/skills"
      ],
      "watch": true,
      "watchDebounceMs": 250
    },
    
    // å®‰è£…åå¥½
    "install": {
      "nodeManager": "pnpm"
    },
    
    // Skill ç‰¹å®šé…ç½®
    "entries": {
      "github": {
        "enabled": true,
        "apiKey": "ghp_xxxxxxxxxxxx",
        "env": {
          "GITHUB_API_URL": "https://api.github.com"
        }
      },
      "openai-image-gen": {
        "enabled": true,
        "apiKey": "sk-xxxxxxxxxxxx",
        "config": {
          "defaultModel": "dall-e-3",
          "defaultSize": "1024x1024"
        }
      },
      "discord": {
        "enabled": false
      }
    }
  }
}
```

### ç¯å¢ƒå˜é‡æ³¨å…¥ï¼ˆä¼ªä»£ç ï¼‰

```typescript
// ============================================
// åº”ç”¨ Skill ç¯å¢ƒå˜é‡è¦†ç›–
// ============================================
FUNCTION applySkillEnvOverrides(params: EnvOverrideParams): () => void {
    { skills, config } = params
    updates = []
    
    FOR entry IN skills:
        skillKey = resolveSkillKey(entry.skill, entry)
        skillConfig = resolveSkillConfig(config, skillKey)
        IF NOT skillConfig: CONTINUE
        
        // åº”ç”¨è‡ªå®šä¹‰ç¯å¢ƒå˜é‡
        IF skillConfig.env:
            FOR [envKey, envValue] OF Object.entries(skillConfig.env):
                IF NOT envValue OR process.env[envKey]: CONTINUE
                updates.push({ key: envKey, prev: process.env[envKey] })
                process.env[envKey] = envValue
        
        // åº”ç”¨ API Key ä½œä¸ºä¸»è¦ç¯å¢ƒå˜é‡
        primaryEnv = entry.metadata?.primaryEnv
        IF primaryEnv AND skillConfig.apiKey AND NOT process.env[primaryEnv]:
            updates.push({ key: primaryEnv, prev: process.env[primaryEnv] })
            process.env[primaryEnv] = skillConfig.apiKey
    
    // è¿”å›æ¢å¤å‡½æ•°
    RETURN () => {
        FOR update IN updates:
            IF update.prev === undefined:
                delete process.env[update.key]
            ELSE:
                process.env[update.key] = update.prev
    }
}
```

### ç¯å¢ƒå˜é‡æ³¨å…¥æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Skill é…ç½®                                                  â”‚
â”‚  â”œâ”€â”€ apiKey: "sk-xxx"                                       â”‚
â”‚  â”œâ”€â”€ primaryEnv: "OPENAI_API_KEY"                           â”‚
â”‚  â””â”€â”€ env: { "CUSTOM_VAR": "value" }                          â”‚
â”‚                     â†“                                       â”‚
â”‚  æ³¨å…¥åˆ° process.env                                         â”‚
â”‚  â”œâ”€â”€ process.env.OPENAI_API_KEY = "sk-xxx"                  â”‚
â”‚  â””â”€â”€ process.env.CUSTOM_VAR = "value"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è¿œç¨‹ Skill æ”¯æŒ

### æ¦‚å¿µ

è¿œç¨‹ Skill å…è®¸åœ¨è¿æ¥çš„è¿œç¨‹èŠ‚ç‚¹ï¼ˆå¦‚ macOS è®¾å¤‡ï¼‰ä¸Šæ‰§è¡Œå¹³å°ç‰¹å®šçš„ Skillã€‚

### ä½¿ç”¨åœºæ™¯

- åœ¨ Linux/Windows ä¸Šè¿è¡Œ OpenClawï¼Œä½†éœ€è¦æ‰§è¡Œ macOS ç‰¹å®šçš„ Skillï¼ˆå¦‚ Apple Notesã€iMessageï¼‰
- åˆ©ç”¨è¿œç¨‹è®¾å¤‡çš„å·²å®‰è£…å·¥å…·å’Œé…ç½®

### èµ„æ ¼æ£€æŸ¥ï¼ˆä¼ªä»£ç ï¼‰

```typescript
// ============================================
// è·å–è¿œç¨‹ Skill èµ„æ ¼
// ============================================
FUNCTION getRemoteSkillEligibility(): RemoteEligibility | undefined {
    // 1. æŸ¥æ‰¾è¿æ¥çš„ macOS èŠ‚ç‚¹
    macNodes = [...remoteNodes.values()].filter(node => 
        isMacPlatform(node.platform, node.deviceFamily) && 
        supportsSystemRun(node.commands)
    )
    
    IF macNodes.length === 0:
        RETURN undefined
    
    // 2. æ”¶é›†è¿œç¨‹èŠ‚ç‚¹ä¸Šçš„äºŒè¿›åˆ¶æ–‡ä»¶
    bins = new Set<string>()
    FOR node IN macNodes:
        FOR bin IN node.bins:
            bins.add(bin)
    
    // 3. è¿”å›è¿œç¨‹èµ„æ ¼ä¸Šä¸‹æ–‡
    RETURN {
        platforms: ["darwin"],
        hasBin: (bin) => bins.has(bin),
        hasAnyBin: (required) => required.some(bin => bins.has(bin)),
        note: "Remote macOS node available...",
    }
}

// ============================================
// è¿œç¨‹èŠ‚ç‚¹ç¼“å­˜é¢„åŠ è½½
// ============================================
FUNCTION primeRemoteSkillsCache(): Promise<void> {
    list = await listNodePairing()
    sawMac = false
    
    FOR node OF list.paired:
        upsertNode({
            nodeId: node.nodeId,
            displayName: node.displayName,
            platform: node.platform,
            deviceFamily: node.deviceFamily,
            commands: node.commands,
            remoteIp: node.remoteIp,
            bins: node.bins,  // é¢„ç¼“å­˜äºŒè¿›åˆ¶åˆ—è¡¨
        })
        
        IF isMacPlatform(node.platform, node.deviceFamily) AND 
           supportsSystemRun(node.commands):
            sawMac = true
    
    // å‘ç° Mac èŠ‚ç‚¹æ—¶è§¦å‘å¿«ç…§æ›´æ–°
    IF sawMac:
        bumpSkillsSnapshotVersion({ reason: "remote-node" })
}
```

### è¿œç¨‹æ‰§è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ¬åœ° OpenClaw â”‚â”€â”€â”€â”€â–¶â”‚  æ£€æŸ¥è¿œç¨‹èŠ‚ç‚¹  â”‚â”€â”€â”€â”€â–¶â”‚  è½¬å‘å‘½ä»¤    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚  è¿œç¨‹èŠ‚ç‚¹æ‰§è¡Œ â”‚
                                        â”‚  (macOS)     â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿”å›ç»“æœ    â”‚â—€â”€â”€â”€â”€â”‚  ç»“æœè½¬å‘    â”‚â—€â”€â”€â”€â”€â”‚  æ‰§è¡Œå®Œæˆ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ClawHub æŠ€èƒ½ç”Ÿæ€ç³»ç»Ÿ

### ClawHub ç®€ä»‹

ClawHub æ˜¯ OpenClaw çš„å…¬å…±æŠ€èƒ½æ³¨å†Œè¡¨ï¼Œæä¾›äº†æŠ€èƒ½çš„æœç´¢ã€å®‰è£…ã€æ›´æ–°å’Œå‘å¸ƒåŠŸèƒ½ã€‚å®ƒæ˜¯ OpenClaw æŠ€èƒ½ç”Ÿæ€ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚

### æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **æŠ€èƒ½æœç´¢** | é€šè¿‡å…³é”®è¯æœç´¢æŠ€èƒ½ |
| **æŠ€èƒ½å®‰è£…** | ä¸€é”®å®‰è£…æŠ€èƒ½åˆ°æœ¬åœ° |
| **æŠ€èƒ½æ›´æ–°** | æ›´æ–°å·²å®‰è£…çš„æŠ€èƒ½åˆ°æœ€æ–°ç‰ˆæœ¬ |
| **æŠ€èƒ½å‘å¸ƒ** | å°†è‡ªå®šä¹‰æŠ€èƒ½å‘å¸ƒåˆ°å…¬å…±æ³¨å†Œè¡¨ |
| **æŠ€èƒ½åŒæ­¥** | æ‰¹é‡åŒæ­¥æœ¬åœ°æŠ€èƒ½ |

### ClawHub CLI å‘½ä»¤

| å‘½ä»¤ | æè¿° |
|------|------|
| `clawhub search "query"` | æœç´¢æŠ€èƒ½ |
| `clawhub install <slug>` | å®‰è£…æŠ€èƒ½ |
| `clawhub update <slug>` | æ›´æ–°æŠ€èƒ½ |
| `clawhub update --all` | æ›´æ–°æ‰€æœ‰æŠ€èƒ½ |
| `clawhub publish <path>` | å‘å¸ƒæŠ€èƒ½ |
| `clawhub sync` | åŒæ­¥æœ¬åœ°æŠ€èƒ½ |

### ä¸ OpenClaw çš„é›†æˆ

- **è‡ªåŠ¨è¯†åˆ«**ï¼šOpenClaw è‡ªåŠ¨è¯†åˆ« ClawHub å®‰è£…çš„æŠ€èƒ½
- **è·¯å¾„é›†æˆ**ï¼šé»˜è®¤å®‰è£…åˆ° `./skills` ç›®å½•
- **å‘½ä»¤æç¤º**ï¼šOpenClaw çš„ `skills` å‘½ä»¤ä¼šæ˜¾ç¤º ClawHub æç¤º

### ä½¿ç”¨ç¤ºä¾‹

```bash
# æœç´¢ GitHub ç›¸å…³æŠ€èƒ½
clawhub search "github"

# å®‰è£…æŠ€èƒ½
clawhub install github-cli

# æ›´æ–°æ‰€æœ‰æŠ€èƒ½
clawhub update --all

# å‘å¸ƒè‡ªå®šä¹‰æŠ€èƒ½
clawhub publish ./skills/my-custom-skill
```

---

## æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜æœºåˆ¶

### æŠ€èƒ½ç¼“å­˜æœºåˆ¶

ä¸ºäº†æé«˜æŠ€èƒ½åŠ è½½é€Ÿåº¦ï¼ŒOpenClaw å®ç°äº†å¤šå±‚æ¬¡çš„ç¼“å­˜æœºåˆ¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç¼“å­˜å±‚æ¬¡ç»“æ„                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ æŠ€èƒ½è·¯å¾„ç¼“å­˜ â”‚  â”‚ å…ƒæ•°æ®ç¼“å­˜   â”‚  â”‚ æ‰§è¡Œç»“æœç¼“å­˜ â”‚         â”‚
â”‚  â”‚ SkillBinsCacheâ”‚ â”‚ (Frontmatter)â”‚ â”‚ (å¯é€‰)       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                              â”‚
â”‚  ç¼“å­˜ç­–ç•¥ï¼š                                                  â”‚
â”‚  - å†…å­˜ç¼“å­˜ï¼šè¿è¡Œæ—¶ä¿æŒ                                      â”‚
â”‚  - æ–‡ä»¶ç›‘è§†ï¼šè‡ªåŠ¨æ£€æµ‹å˜æ›´å¹¶åˆ·æ–°                               â”‚
â”‚  - ç‰ˆæœ¬æ§åˆ¶ï¼šåŸºäºå†…å®¹å“ˆå¸Œ                                     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SkillBinsCache å®ç°ï¼ˆä¼ªä»£ç ï¼‰

```typescript
CLASS SkillBinsCache:
    PRIVATE bins = new Set<string>()
    PRIVATE lastRefresh = 0
    PRIVATE ttlMs = 90_000
    PRIVATE fetch: () => Promise<string[]>

    CONSTRUCTOR(fetch):
        this.fetch = fetch

    ASYNC current(force = false):
        IF force OR Date.now() - this.lastRefresh > this.ttlMs:
            await this.refresh()
        RETURN this.bins

    PRIVATE ASYNC refresh():
        TRY:
            bins = await this.fetch()
            this.bins = new Set(bins)
            this.lastRefresh = Date.now()
        CATCH:
            IF NOT this.lastRefresh:  // é¦–æ¬¡å¤±è´¥
                this.bins = new Set()
```

### çƒ­é‡è½½æœºåˆ¶ï¼ˆä¼ªä»£ç ï¼‰

```typescript
// ============================================
// ç¡®ä¿ Skill æ–‡ä»¶ç›‘è§†å™¨
// ============================================
FUNCTION ensureSkillsWatcher(params: WatcherParams): void {
    workspaceDir = params.workspaceDir.trim()
    IF NOT workspaceDir: RETURN
    
    watchEnabled = params.config?.skills?.load?.watch !== false
    debounceMs = params.config?.skills?.load?.watchDebounceMs ?? 250
    
    existing = watchers.get(workspaceDir)
    
    // å¦‚æœç¦ç”¨ç›‘è§†ï¼Œæ¸…ç†ç°æœ‰ç›‘è§†å™¨
    IF NOT watchEnabled:
        IF existing:
            watchers.delete(workspaceDir)
            IF existing.timer: clearTimeout(existing.timer)
            existing.watcher.close()
        RETURN
    
    watchPaths = resolveWatchPaths(workspaceDir, params.config)
    pathsKey = watchPaths.join("|")
    
    // å¦‚æœé…ç½®æœªå˜ï¼Œå¤ç”¨ç°æœ‰ç›‘è§†å™¨
    IF existing AND existing.pathsKey === pathsKey AND existing.debounceMs === debounceMs:
        RETURN
    
    // æ¸…ç†æ—§ç›‘è§†å™¨
    IF existing:
        watchers.delete(workspaceDir)
        IF existing.timer: clearTimeout(existing.timer)
        existing.watcher.close()
    
    // åˆ›å»ºæ–°ç›‘è§†å™¨
    watcher = chokidar.watch(watchPaths, {
        ignoreInitial: true,
        awaitWriteFinish: { stabilityThreshold: debounceMs, pollInterval: 100 },
        ignored: DEFAULT_SKILLS_WATCH_IGNORED,  // å¿½ç•¥ node_modules ç­‰
    })
    
    state = { watcher, pathsKey, debounceMs }
    
    // è°ƒåº¦æ›´æ–°ï¼ˆé˜²æŠ–ï¼‰
    schedule = (changedPath) => {
        state.pendingPath = changedPath ?? state.pendingPath
        IF state.timer: clearTimeout(state.timer)
        state.timer = setTimeout(() => {
            bumpSkillsSnapshotVersion({
                workspaceDir,
                reason: "watch",
                changedPath: state.pendingPath,
            })
            state.pendingPath = undefined
            state.timer = undefined
        }, debounceMs)
    }
    
    watcher.on("add", p => schedule(p))
    watcher.on("change", p => schedule(p))
    watcher.on("unlink", p => schedule(p))
    
    watchers.set(workspaceDir, state)
}

// ============================================
// ç‰ˆæœ¬ç®¡ç†
// ============================================
listeners = new Set<(event: SkillsChangeEvent) => void>()
workspaceVersions = new Map<string, number>()
globalVersion = 0

FUNCTION bumpSkillsSnapshotVersion(params: BumpParams): number {
    reason = params?.reason ?? "manual"
    
    IF params?.workspaceDir:
        current = workspaceVersions.get(params.workspaceDir) ?? 0
        next = bumpVersion(current)
        workspaceVersions.set(params.workspaceDir, next)
        emit({ workspaceDir: params.workspaceDir, reason, changedPath: params?.changedPath })
        RETURN next
    
    globalVersion = bumpVersion(globalVersion)
    emit({ reason, changedPath: params?.changedPath })
    RETURN globalVersion
}

// ç‰ˆæœ¬é€’å¢ç­–ç•¥
FUNCTION bumpVersion(current: number): number {
    now = Date.now()
    RETURN now <= current ? current + 1 : now
}
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **åˆç†ä½¿ç”¨ç¼“å­˜**ï¼šé¿å…é¢‘ç¹åˆ·æ–°æŠ€èƒ½åˆ—è¡¨
2. **ç²¾ç®€ Skill æè¿°**ï¼šå‡å°‘ä¸Šä¸‹æ–‡å ç”¨
3. **å»¶è¿ŸåŠ è½½**ï¼šå°†å¤§å‹èµ„æºæ”¾åœ¨ `scripts/` æˆ– `assets/` ä¸­
4. **ä½¿ç”¨è¿œç¨‹èŠ‚ç‚¹**ï¼šå°†å¹³å°ç‰¹å®š Skill æ”¾åœ¨è¿œç¨‹èŠ‚ç‚¹æ‰§è¡Œ

---

## å¹¶å‘æ§åˆ¶ä¸çº¿ç¨‹å®‰å…¨

### åºåˆ—åŒ–æ‰§è¡Œæœºåˆ¶

Skill åŒæ­¥é‡‡ç”¨**åŸºäº Promise é“¾çš„åºåˆ—åŒ–é˜Ÿåˆ—**ï¼š

```typescript
// ============================================
// å…¨å±€åŒæ­¥é˜Ÿåˆ—
// ============================================
SKILLS_SYNC_QUEUE = new Map<string, Promise<unknown>>()

FUNCTION serializeByKey<T>(key: string, task: () => Promise<T>): Promise<T> {
    // 1. è·å–æˆ–åˆ›å»ºé˜Ÿåˆ—
    prev = SKILLS_SYNC_QUEUE.get(key) ?? Promise.resolve()
    
    // 2. æ„å»º Promise é“¾ï¼ˆæ— è®ºå‰ä¸€ä¸ªæˆåŠŸæˆ–å¤±è´¥éƒ½æ‰§è¡Œï¼‰
    next = prev.then(task, task)
    
    // 3. æ›´æ–°é˜Ÿåˆ—
    SKILLS_SYNC_QUEUE.set(key, next)
    
    TRY:
        // 4. ç­‰å¾…å½“å‰ä»»åŠ¡å®Œæˆ
        RETURN await next
    FINALLY:
        // 5. æ¸…ç†ï¼ˆä»…å½“å½“å‰ Promise ä»æ˜¯é˜Ÿåˆ—å¤´æ—¶ï¼‰
        IF SKILLS_SYNC_QUEUE.get(key) === next:
            SKILLS_SYNC_QUEUE.delete(key)
}

// ä½¿ç”¨ç¤ºä¾‹ï¼šSkill åŒæ­¥åˆ°å·¥ä½œåŒº
await serializeByKey(`syncSkills:${targetDir}`, async () => {
    // 1. æ¸…ç†ç›®æ ‡ç›®å½•
    await fsp.rm(targetSkillsDir, { recursive: true, force: true })
    await fsp.mkdir(targetSkillsDir, { recursive: true })
    
    // 2. å¤åˆ¶ Skill æ–‡ä»¶
    for (const entry of entries) {
        const dest = path.join(targetSkillsDir, entry.skill.name)
        await fsp.cp(entry.skill.baseDir, dest, {
            recursive: true,
            force: true,
        })
    }
})
```

### å•æ¬¡æ‰§è¡Œä¿è¯

```typescript
// è°ƒè¯•æ—¥å¿—å•æ¬¡è¾“å‡º
skillCommandDebugOnce = new Set<string>()

FUNCTION debugSkillCommandOnce(messageKey: string, message: string, meta?: Record) {
    IF skillCommandDebugOnce.has(messageKey): RETURN
    skillCommandDebugOnce.add(messageKey)
    skillsLogger.debug(message, meta)
}

// è­¦å‘Šå•æ¬¡è¾“å‡º
hasWarnedMissingBundledDir = false

FUNCTION resolveBundledSkillsContext(opts) {
    IF NOT dir AND NOT hasWarnedMissingBundledDir:
        hasWarnedMissingBundledDir = true
        skillsLogger.warn("Bundled skills directory could not be resolved...")
}
```

### é…ç½®é‡è½½å¹¶å‘æ§åˆ¶

```typescript
// é…ç½®é‡è½½é˜²æŠ–æ§åˆ¶
FUNCTION startGatewayConfigReloader(opts) {
    debounceTimer = null
    pending = false
    running = false
    
    schedule = () => {
        IF stopped: RETURN
        IF debounceTimer: clearTimeout(debounceTimer)
        
        debounceTimer = setTimeout(() => {
            void runReload()
        }, settings.debounceMs)
    }
    
    runReload = async () => {
        IF running:
            pending = true  // æ ‡è®°å¾…å¤„ç†
            RETURN
        running = true
        
        TRY:
            // æ‰§è¡Œé‡è½½é€»è¾‘...
        FINALLY:
            running = false
            IF pending:
                pending = false
                schedule()  // å¤„ç†ç§¯å‹çš„è¯·æ±‚
    }
}
```

---

## é”™è¯¯å¤„ç†ä¸é‡è¯•æœºåˆ¶

### åˆ†å±‚é”™è¯¯å¤„ç†

```typescript
// é”™è¯¯åˆ†ç±»å¤„ç†
FUNCTION extractErrorCode(err: unknown): string | undefined {
    IF NOT err OR typeof err !== "object": RETURN undefined
    code = err.code
    IF typeof code === "string": RETURN code
    IF typeof code === "number": RETURN String(code)
    RETURN undefined
}

FUNCTION hasErrnoCode(err: unknown, code: string): boolean {
    RETURN isErrno(err) AND err.code === code
}

// ä½¿ç”¨ç¤ºä¾‹
TRY:
    await fs.stat(filePath)
CATCH err:
    IF hasErrnoCode(err, "ENOENT"):
        // æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼˜é›…å¤„ç†
        RETURN null
    throw err  // å…¶ä»–é”™è¯¯ç»§ç»­æŠ›å‡º
```

### æŒ‡æ•°é€€é¿é‡è¯•

```typescript
// ============================================
// æŒ‡æ•°é€€é¿é‡è¯•ç®—æ³•
// ============================================
FUNCTION retryAsync<T>(
    fn: () => Promise<T>,
    options: RetryOptions
): Promise<T> {
    {
        attempts,      // æœ€å¤§å°è¯•æ¬¡æ•°
        minDelayMs,    // æœ€å°å»¶è¿Ÿ
        maxDelayMs,    // æœ€å¤§å»¶è¿Ÿ
        jitter         // æŠ–åŠ¨å› å­(0-1)
    } = resolveRetryConfig(DEFAULT_RETRY_CONFIG, options)
    
    shouldRetry = options.shouldRetry ?? (() => true)
    
    FOR attempt = 1 TO maxAttempts:
        TRY:
            RETURN await fn()  // å°è¯•æ‰§è¡Œ
        CATCH err:
            lastErr = err
            
            // åˆ¤æ–­æ˜¯å¦åº”è¯¥é‡è¯•
            IF attempt >= maxAttempts OR NOT shouldRetry(err, attempt):
                BREAK
            
            // è®¡ç®—é€€é¿å»¶è¿Ÿ
            retryAfterMs = options.retryAfterMs?.(err)
            hasRetryAfter = typeof retryAfterMs === "number"
            
            // æŒ‡æ•°é€€é¿: delay = minDelay * 2^(attempt-1)
            baseDelay = hasRetryAfter
                ? Math.max(retryAfterMs, minDelayMs)
                : minDelayMs * 2 ** (attempt - 1)
            
            // åº”ç”¨æŠ–åŠ¨é¿å…æƒŠç¾¤
            delay = Math.min(baseDelay, maxDelayMs)
            delay = applyJitter(delay, jitter)
            
            // å›è°ƒé€šçŸ¥
            options.onRetry?.({ attempt, maxAttempts, delayMs: delay, err })
            
            await sleep(delay)
    
    throw lastErr
}
```

**é€€é¿ç®—æ³•å¯è§†åŒ–**ï¼š

| å°è¯•æ¬¡æ•° | åŸºç¡€å»¶è¿Ÿ(300ms) | æœ€å¤§å»¶è¿Ÿ(30000ms) | å®é™…å»¶è¿Ÿ(å¸¦æŠ–åŠ¨) |
|---------|----------------|------------------|-----------------|
| 1 | 300ms | 300ms | 270-330ms |
| 2 | 600ms | 600ms | 540-660ms |
| 3 | 1200ms | 1200ms | 1080-1320ms |
| 4 | 2400ms | 2400ms | 2160-2640ms |
| 5 | 4800ms | 4800ms | 4320-5280ms |
| 6 | 9600ms | 9600ms | 8640-10560ms |
| 7 | 19200ms | 19200ms | 17280-21120ms |
| 8 | 38400ms | 30000ms | 27000-30000ms (å°é¡¶) |

### è¿›ç¨‹æ‰§è¡Œé‡è¯•

```typescript
// è¿›ç¨‹å¯åŠ¨é‡è¯•
FUNCTION spawnWithFallback(params) {
    retryCodes = params.retryCodes ?? ["EBADF"]  // æ–‡ä»¶æè¿°ç¬¦é”™è¯¯
    attempts = [
        { options: baseOptions },
        ...fallbacks.map(fallback => ({
            label: fallback.label,
            options: { ...baseOptions, ...fallback.options }
        }))
    ]
    
    FOR index = 0 TO attempts.length - 1:
        TRY:
            child = await spawnAndWaitForSpawn(spawnImpl, params.argv, attempt.options)
            RETURN {
                child,
                usedFallback: index > 0,
                fallbackLabel: attempt.label
            }
        CATCH err:
            lastError = err
            nextFallback = fallbacks[index]
            
            // åˆ¤æ–­é”™è¯¯æ˜¯å¦å¯é‡è¯•
            IF NOT nextFallback OR NOT shouldRetry(err, retryCodes):
                throw err
            
            params.onFallback?.(err, nextFallback)
    
    throw lastError
}
```

### è¿œç¨‹èŠ‚ç‚¹é”™è¯¯å¤„ç†

```typescript
// è¿œç¨‹äºŒè¿›åˆ¶æ¢æµ‹é”™è¯¯å¤„ç†
FUNCTION logRemoteBinProbeFailure(nodeId: string, err: unknown) {
    message = extractErrorMessage(err)
    label = describeNode(nodeId)
    
    // åˆ†ç±»å¤„ç†ä¸åŒé”™è¯¯
    IF message?.includes("node not connected") OR 
       message?.includes("node disconnected"):
        // èŠ‚ç‚¹æš‚æ—¶ä¸å¯ç”¨ - é¢„æœŸå†…çš„é”™è¯¯
        log.info(`remote bin probe skipped: node unavailable (${label})`)
        RETURN
    
    IF message?.includes("invoke timed out") OR message?.includes("timeout"):
        // è¶…æ—¶é”™è¯¯ - éœ€è¦æ£€æŸ¥è¿æ¥
        log.warn(`remote bin probe timed out (${label}); check node connectivity`)
        RETURN
    
    // å…¶ä»–é”™è¯¯
    log.warn(`remote bin probe error (${label}): ${message ?? "unknown"}`)
}
```

---

## å¼€å‘è§„èŒƒä¸æœ€ä½³å®è·µ

### 1. Skill å‘½åè§„èŒƒ

```
âœ… æ¨èï¼š
- github          # ç®€æ´æ˜äº†
- spotify-player  # ä½¿ç”¨è¿å­—ç¬¦
- apple-notes     # å¹³å°å‰ç¼€

âŒ é¿å…ï¼š
- GitHub          # å¤§å†™å­—æ¯
- spotify_player  # ä¸‹åˆ’çº¿
- my_skill        # å†—ä½™å‰ç¼€
```

### 2. Description ç¼–å†™è§„èŒƒ

```
æ ¼å¼ï¼š"[åŠŸèƒ½]ã€‚åœ¨[è§¦å‘æ¡ä»¶]æ—¶è°ƒç”¨ã€‚"

âœ… æ¨èï¼š
"ç®¡ç† Spotify æ’­æ”¾ã€‚å½“ç”¨æˆ·æåŠéŸ³ä¹ã€æ’­æ”¾åˆ—è¡¨ã€æ­Œæ›²æ—¶è°ƒç”¨ã€‚"
"GitHub CLI é›†æˆã€‚å½“ç”¨æˆ·æåŠ PRã€Issueã€ä»“åº“æ“ä½œæ—¶è°ƒç”¨ã€‚"

âŒ é¿å…ï¼š
"è¿™æ˜¯ä¸€ä¸ª GitHub Skillã€‚"  # è¿‡äºç®€å•
"ä½¿ç”¨ gh å‘½ä»¤è¡Œå·¥å…·ã€‚"      # åªæè¿°å®ç°
```

### 3. ä¾èµ–å£°æ˜æœ€ä½³å®è·µ

```json5
{
  "openclaw": {
    "requires": {
      // å¿…é¡»å…¨éƒ¨å­˜åœ¨çš„äºŒè¿›åˆ¶æ–‡ä»¶
      "bins": ["gh", "git"],
      
      // è‡³å°‘ä¸€ä¸ªå­˜åœ¨çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæä¾›æ›¿ä»£æ–¹æ¡ˆï¼‰
      "anyBins": ["node", "bun", "deno"],
      
      // å¿…é¡»è®¾ç½®çš„ç¯å¢ƒå˜é‡
      "env": ["GITHUB_TOKEN"],
      
      // å¿…é¡»å­˜åœ¨çš„é…ç½®è·¯å¾„
      "config": ["github.defaultRepo"]
    }
  }
}
```

### 4. å®‰è£…å™¨é…ç½®æœ€ä½³å®è·µ

```json5
{
  "openclaw": {
    "install": [
      // ä¸ºä¸åŒå¹³å°æä¾›å¤šä¸ªå®‰è£…é€‰é¡¹
      {
        "kind": "brew",
        "formula": "gh",
        "bins": ["gh"],
        "os": ["darwin", "linux"],
        "label": "macOS/Linux (Homebrew)"
      },
      {
        "kind": "download",
        "url": "https://.../gh_windows.zip",
        "archive": "zip",
        "extract": true,
        "bins": ["gh.exe"],
        "os": ["win32"],
        "label": "Windows (Download)"
      }
    ]
  }
}
```

### 5. ç›®å½•ç»“æ„è§„èŒƒ

```
skills/
â””â”€â”€ my-skill/
    â”œâ”€â”€ SKILL.md              # å¿…éœ€ï¼šSkill å®šä¹‰
    â”œâ”€â”€ scripts/              # å¯é€‰ï¼šè¾…åŠ©è„šæœ¬
    â”‚   â”œâ”€â”€ setup.sh
    â”‚   â””â”€â”€ utils.js
    â”œâ”€â”€ references/           # å¯é€‰ï¼šå‚è€ƒèµ„æ–™
    â”‚   â””â”€â”€ api-docs.md
    â””â”€â”€ assets/               # å¯é€‰ï¼šèµ„æºæ–‡ä»¶
        â””â”€â”€ icon.png
```

### 6. ç‰ˆæœ¬æ§åˆ¶è§„èŒƒ

```
âœ… æ¨èï¼š
- ä½¿ç”¨ Git ç®¡ç† Skill
- æä¾›æ¸…æ™°çš„ CHANGELOG.md
- ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆsemverï¼‰
- åœ¨ SKILL.md ä¸­æ ‡æ³¨ç‰ˆæœ¬

âŒ é¿å…ï¼š
- æäº¤æ•æ„Ÿä¿¡æ¯ï¼ˆAPI å¯†é’¥ï¼‰
- æäº¤å¤§å‹äºŒè¿›åˆ¶æ–‡ä»¶
- æäº¤ node_modules/
```

### 7. æµ‹è¯• checklist

```bash
# 1. éªŒè¯ SKILL.md æ ¼å¼
# - YAML Frontmatter æ ¼å¼æ­£ç¡®
# - JSON5 å…ƒæ•°æ®æ ¼å¼æ­£ç¡®

# 2. æœ¬åœ°æµ‹è¯•
# - å°† Skill æ”¾å…¥å·¥ä½œåŒºçš„ skills/ ç›®å½•
# - é‡å¯ OpenClaw æˆ–ç­‰å¾…çƒ­é‡è½½

# 3. æ£€æŸ¥èµ„æ ¼
# - è¿è¡Œ /skills.status æŸ¥çœ‹ Skill æ˜¯å¦è¢«åŠ è½½
# - æ£€æŸ¥ä¾èµ–æ˜¯å¦æ»¡è¶³

# 4. åŠŸèƒ½æµ‹è¯•
# - æµ‹è¯•å‘½ä»¤è°ƒç”¨
# - æµ‹è¯•å‚æ•°ä¼ é€’
# - æµ‹è¯•é”™è¯¯å¤„ç†

# 5. è·¨å¹³å°æµ‹è¯•
# - åœ¨ä¸åŒå¹³å°ä¸Šæµ‹è¯•å®‰è£…æµç¨‹
# - éªŒè¯å¹³å°ç‰¹å®šé€»è¾‘
```

### 8. æ–‡æ¡£è¦æ±‚

```markdown
# Skill åç§°

## åŠŸèƒ½æ¦‚è¿°
ç®€è¦æè¿° Skill çš„åŠŸèƒ½å’Œç”¨é€”ã€‚

## å‰ç½®æ¡ä»¶
- å¿…éœ€çš„ä¾èµ–ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ï¼‰
- å¿…éœ€çš„é…ç½®
- å¹³å°é™åˆ¶

## å®‰è£…æ–¹æ³•
æä¾›å®‰è£…æ­¥éª¤æˆ–è‡ªåŠ¨å®‰è£…é…ç½®ã€‚

## ä½¿ç”¨ç¤ºä¾‹
æä¾›å…·ä½“çš„å‘½ä»¤ç¤ºä¾‹å’Œé¢„æœŸè¾“å‡ºã€‚

## æ³¨æ„äº‹é¡¹
- å®‰å…¨æç¤º
- å·²çŸ¥é™åˆ¶
- å¸¸è§é—®é¢˜
- æ•…éšœæ’é™¤

## æ›´æ–°æ—¥å¿—
è®°å½•ç‰ˆæœ¬å˜æ›´å†å²ã€‚
```

---

## å¼€æºæ ‡å‡†è§„èŒƒ

### 1. é¡¹ç›®ç»“æ„æ ‡å‡†

```
openclaw-skill-template/
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ LICENSE                   # å¼€æºè®¸å¯è¯
â”œâ”€â”€ CHANGELOG.md              # ç‰ˆæœ¬å˜æ›´æ—¥å¿—
â”œâ”€â”€ CONTRIBUTING.md           # è´¡çŒ®æŒ‡å—
â”œâ”€â”€ skill/
â”‚   â””â”€â”€ SKILL.md              # Skill å®šä¹‰æ–‡ä»¶
â”œâ”€â”€ scripts/                  # è¾…åŠ©è„šæœ¬
â”‚   â”œâ”€â”€ install.sh
â”‚   â””â”€â”€ test.sh
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ skill.test.js
â”œâ”€â”€ docs/                     # æ–‡æ¡£
â”‚   â””â”€â”€ api-reference.md
â””â”€â”€ assets/                   # èµ„æºæ–‡ä»¶
    â””â”€â”€ icon.png
```

### 2. å¼€æºè®¸å¯è¯æ¨è

| è®¸å¯è¯ | é€‚ç”¨åœºæ™¯ |
|--------|----------|
| **MIT** | æœ€å®½æ¾ï¼Œå…è®¸å•†ä¸šä½¿ç”¨ï¼Œæ¨è |
| **Apache-2.0** | æä¾›ä¸“åˆ©ä¿æŠ¤ï¼Œé€‚åˆä¼ä¸š |
| **GPL-3.0** | å¼ºåˆ¶å¼€æºè¡ç”Ÿä½œå“ |
| **BSD-3-Clause** | ç®€å•å®½æ¾ï¼Œä¿ç•™ç‰ˆæƒå£°æ˜ |

### 3. ä»£ç è´¨é‡æ ‡å‡†

```
âœ… å¿…é¡»æ»¡è¶³ï¼š
- é€šè¿‡å®‰å…¨æ‰«æï¼ˆæ—  critical/high çº§åˆ«è­¦å‘Šï¼‰
- æä¾›å®Œæ•´çš„æ–‡æ¡£
- åŒ…å«ä½¿ç”¨ç¤ºä¾‹
- æ”¯æŒé”™è¯¯å¤„ç†

âœ… æ¨èæ»¡è¶³ï¼š
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- æä¾› CI/CD é…ç½®
- æ”¯æŒå¤šå¹³å°
- å›½é™…åŒ–æ”¯æŒ
```

### 4. ç‰ˆæœ¬ç®¡ç†è§„èŒƒ

```
è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰ï¼šMAJOR.MINOR.PATCH

- MAJORï¼šä¸å…¼å®¹çš„ API å˜æ›´
- MINORï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ·»åŠ 
- PATCHï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®å¤

ç¤ºä¾‹ï¼š
- 1.0.0ï¼šåˆå§‹ç¨³å®šç‰ˆæœ¬
- 1.1.0ï¼šæ·»åŠ æ–°åŠŸèƒ½
- 1.1.1ï¼šä¿®å¤ bug
- 2.0.0ï¼šç ´åæ€§å˜æ›´
```

### 5. å‘å¸ƒæµç¨‹

```
1. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆpackage.json / SKILL.mdï¼‰
      â†“
2. æ›´æ–° CHANGELOG.md
      â†“
3. è¿è¡Œæµ‹è¯•å¥—ä»¶
      â†“
4. åˆ›å»º Git Tag
      â†“
5. å‘å¸ƒåˆ° GitHub Releases
      â†“
6. å‘å¸ƒåˆ° ClawHubï¼ˆå¦‚é€‚ç”¨ï¼‰
      â†“
7. æ›´æ–°æ–‡æ¡£ç½‘ç«™
```

### 6. è´¡çŒ®æŒ‡å—æ¨¡æ¿

```markdown
# è´¡çŒ®æŒ‡å—

## å¦‚ä½•è´¡çŒ®

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤å˜æ›´ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## å¼€å‘è§„èŒƒ

- éµå¾ªç°æœ‰ä»£ç é£æ ¼
- æ·»åŠ å¿…è¦çš„æµ‹è¯•
- æ›´æ–°æ–‡æ¡£
- é€šè¿‡å®‰å…¨æ‰«æ

## æŠ¥å‘Šé—®é¢˜

è¯·ä½¿ç”¨ Issue æ¨¡æ¿ï¼ŒåŒ…å«ï¼š
- é—®é¢˜æè¿°
- å¤ç°æ­¥éª¤
- ç¯å¢ƒä¿¡æ¯
- é”™è¯¯æ—¥å¿—
```

### 7. æ–‡æ¡£æ ‡å‡†

| æ–‡æ¡£ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|
| README.md | âœ… | é¡¹ç›®æ¦‚è¿°ã€å®‰è£…ã€ä½¿ç”¨ |
| LICENSE | âœ… | å¼€æºè®¸å¯è¯ |
| CHANGELOG.md | âœ… | ç‰ˆæœ¬å˜æ›´å†å² |
| CONTRIBUTING.md | âœ… | è´¡çŒ®æŒ‡å— |
| CODE_OF_CONDUCT.md | æ¨è | è¡Œä¸ºå‡†åˆ™ |
| SECURITY.md | æ¨è | å®‰å…¨æ”¿ç­– |

---

## æœªæ¥å‘å±•æ–¹å‘

### 1. æ™ºèƒ½åŒ–å¢å¼º

- **è¯­ä¹‰æŠ€èƒ½å‘ç°**ï¼šåˆ©ç”¨å¤§æ¨¡å‹ç†è§£ç”¨æˆ·æ„å›¾ï¼Œè‡ªåŠ¨åŒ¹é…æœ€åˆé€‚çš„ Skill
- **æ™ºèƒ½å‚æ•°æå–**ï¼šä½¿ç”¨ NLP æŠ€æœ¯ä»è‡ªç„¶è¯­è¨€ä¸­æå–å‚æ•°
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šç†è§£å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œè‡ªåŠ¨å¡«å……ç¼ºå¤±å‚æ•°

### 2. æ€§èƒ½ä¼˜åŒ–

- **æ‰§è¡Œæ± **ï¼šç»´æŠ¤é¢„åˆ›å»ºçš„æ‰§è¡Œç¯å¢ƒï¼Œå‡å°‘å¯åŠ¨å¼€é”€
- **æ™ºèƒ½ç¼“å­˜**ï¼šåŸºäºä½¿ç”¨é¢‘ç‡å’Œå†…å®¹çš„æ™ºèƒ½ç¼“å­˜ç­–ç•¥
- **å¹¶è¡Œæ‰§è¡Œ**ï¼šæ”¯æŒå¤šä¸ª Skill å¹¶è¡Œæ‰§è¡Œ

### 3. å®‰å…¨å¢å¼º

- **æ²™ç®±éš”ç¦»**ï¼šä½¿ç”¨å®¹å™¨æŠ€æœ¯å®ç°æ›´å®Œå–„çš„æ²™ç®±éš”ç¦»
- **æƒé™ç®¡ç†**ï¼šåŸºäºè§’è‰²çš„ç»†ç²’åº¦æƒé™æ§åˆ¶
- **å®‰å…¨å®¡è®¡**ï¼šå®Œå–„çš„æ‰§è¡Œæ—¥å¿—å’Œå®¡è®¡æœºåˆ¶

### 4. ç”Ÿæ€å»ºè®¾

- **Skill å¸‚åœº**ï¼šå»ºç«‹å®˜æ–¹ Skill å¸‚åœº
- **å¼€å‘è€…å·¥å…·**ï¼šæä¾› Skill å¼€å‘è„šæ‰‹æ¶å’Œè°ƒè¯•å·¥å…·
- **æ ‡å‡†åŒ–**ï¼šæ¨åŠ¨ Skill æ ¼å¼çš„è¡Œä¸šæ ‡å‡†

### 5. å¤šæ¨¡æ€æ”¯æŒ

- **è¯­éŸ³äº¤äº’**ï¼šæ”¯æŒè¯­éŸ³å‘½ä»¤è°ƒç”¨ Skill
- **å›¾åƒè¾“å…¥**ï¼šä»å›¾åƒä¸­æå–å‚æ•°
- **å¯Œåª’ä½“è¾“å‡º**ï¼šæ”¯æŒå›¾è¡¨ã€å›¾ç‰‡ç­‰å¯Œåª’ä½“ç»“æœ

---

## é™„å½•ï¼šç±»å‹å®šä¹‰å‚è€ƒ

### SkillEntry

```typescript
interface SkillEntry {
  skill: Skill;                          // åŸºç¡€ Skill å¯¹è±¡
  frontmatter: ParsedSkillFrontmatter;   // è§£æåçš„ frontmatter
  metadata?: OpenClawSkillMetadata;      // OpenClaw æ‰©å±•å…ƒæ•°æ®
  invocation?: SkillInvocationPolicy;    // è°ƒç”¨ç­–ç•¥
}
```

### OpenClawSkillMetadata

```typescript
interface OpenClawSkillMetadata {
  always?: boolean;                      // å§‹ç»ˆåŒ…å«
  skillKey?: string;                     // é…ç½®é”®
  primaryEnv?: string;                   // ä¸»ç¯å¢ƒå˜é‡å
  emoji?: string;                        // è¡¨æƒ…ç¬¦å·
  homepage?: string;                     // ä¸»é¡µ
  os?: string[];                         // æ”¯æŒçš„å¹³å°
  requires?: {
    bins?: string[];                     // å¿…éœ€çš„äºŒè¿›åˆ¶æ–‡ä»¶
    anyBins?: string[];                  // ä»»ä¸€å¿…éœ€çš„äºŒè¿›åˆ¶æ–‡ä»¶
    env?: string[];                      // å¿…éœ€çš„ç¯å¢ƒå˜é‡
    config?: string[];                   // å¿…éœ€çš„é…ç½®è·¯å¾„
  };
  install?: SkillInstallSpec[];          // å®‰è£…è§„èŒƒ
}
```

### SkillInstallSpec

```typescript
interface SkillInstallSpec {
  id?: string;                           // å®‰è£…å™¨ ID
  kind: "brew" | "node" | "go" | "uv" | "download";
  label?: string;                        // æ˜¾ç¤ºæ ‡ç­¾
  bins?: string[];                       // æä¾›çš„äºŒè¿›åˆ¶æ–‡ä»¶
  os?: string[];                         // æ”¯æŒçš„å¹³å°
  formula?: string;                      // brew å…¬å¼å
  package?: string;                      // npm åŒ…å
  module?: string;                       // Go æ¨¡å—è·¯å¾„
  url?: string;                          // ä¸‹è½½ URL
  archive?: string;                      // å½’æ¡£ç±»å‹
  extract?: boolean;                     // æ˜¯å¦è§£å‹
  stripComponents?: number;              // å»æ‰çš„ç›®å½•å±‚çº§
  targetDir?: string;                    // ç›®æ ‡ç›®å½•
}
```

### SkillInvocationPolicy

```typescript
interface SkillInvocationPolicy {
  userInvocable?: boolean;               // ç”¨æˆ·æ˜¯å¦å¯ç›´æ¥è°ƒç”¨
  modelInvocable?: boolean;              // æ¨¡å‹æ˜¯å¦å¯è‡ªåŠ¨è°ƒç”¨
  dispatch?: SkillCommandDispatchSpec;   // åˆ†å‘é…ç½®
}
```

---

## æŠ€æœ¯æ¶æ„æ€»ç»“

### æ ¸å¿ƒè®¾è®¡æ¨¡å¼

| æ¨¡å¼ | åº”ç”¨åœºæ™¯ | å®ç°æ–‡ä»¶ |
|------|----------|----------|
| **ç­–ç•¥æ¨¡å¼** | å®‰è£…å‘½ä»¤æ„å»º | `skills-install.ts` |
| **è§‚å¯Ÿè€…æ¨¡å¼** | Skill å˜æ›´ç›‘å¬ | `refresh.ts` |
| **è´£ä»»é“¾æ¨¡å¼** | èµ„æ ¼æ£€æŸ¥é“¾ | `config.ts` |
| **äº«å…ƒæ¨¡å¼** | Skill å¿«ç…§ç¼“å­˜ | `workspace.ts` |
| **æ¡¥æ¥æ¨¡å¼** | ä¿¡å·è½¬å‘ | `child-process-bridge.ts` |

### æ€§èƒ½ä¼˜åŒ–è¦ç‚¹

1. **ç¼“å­˜å±‚æ¬¡åŒ–**ï¼šå¿«ç…§ç¼“å­˜ -> è¿œç¨‹èŠ‚ç‚¹ç¼“å­˜ -> å†…ç½® Skill ç¼“å­˜
2. **æ‡’åŠ è½½ç­–ç•¥**ï¼šæŒ‰éœ€åŠ è½½ Skill æ¡ç›®å’Œå¿«ç…§
3. **é˜²æŠ–å¤„ç†**ï¼šæ–‡ä»¶å˜æ›´é˜²æŠ–(250ms)ï¼Œé…ç½®é‡è½½é˜²æŠ–(300ms)
4. **åºåˆ—åŒ–æ§åˆ¶**ï¼šåŸºäº Promise é“¾çš„é˜Ÿåˆ—é¿å…ç«æ€æ¡ä»¶

### å®‰å…¨æœºåˆ¶

1. **ä»£ç æ‰«æ**ï¼šå®‰è£…å‰æ‰«æå±é™©ä»£ç æ¨¡å¼
2. **æ²™ç®±éš”ç¦»**ï¼šSkill åœ¨å·¥ä½œåŒºæ²™ç®±ä¸­æ‰§è¡Œ
3. **æƒé™æ£€æŸ¥**ï¼šäºŒè¿›åˆ¶ã€ç¯å¢ƒå˜é‡ã€é…ç½®çš„å¤šå±‚éªŒè¯
4. **ä¿¡å·éš”ç¦»**ï¼šçˆ¶å­è¿›ç¨‹ä¿¡å·æ¡¥æ¥ç¡®ä¿ä¼˜é›…å…³é—­

---

## æ€»ç»“

OpenClaw çš„ Skill ç³»ç»Ÿæ˜¯ä¸€ä¸ªè®¾è®¡ç²¾è‰¯ã€åŠŸèƒ½å¼ºå¤§çš„æ‰©å±•æœºåˆ¶ï¼š

1. **å£°æ˜å¼å®šä¹‰**ï¼šé€šè¿‡ `SKILL.md` ç®€æ´åœ°å®šä¹‰ Skill åŠŸèƒ½
2. **æ™ºèƒ½åŠ è½½**ï¼šå¤šæºåˆå¹¶ã€æ¡ä»¶è¿‡æ»¤ã€èµ„æ ¼åˆ¤å®š
3. **å®‰å…¨ä¼˜å…ˆ**ï¼šå®‰è£…å‰æ‰«æã€å±é™©ä»£ç æ£€æµ‹ã€æ‰§è¡Œæ—¶æƒé™æ§åˆ¶
4. **çµæ´»é…ç½®**ï¼šæ”¯æŒç¯å¢ƒå˜é‡æ³¨å…¥ã€è¿œç¨‹æ‰§è¡Œã€å¤šå±‚æ¬¡ç¼“å­˜
5. **ç”Ÿæ€å®Œå–„**ï¼šClawHub æä¾›æŠ€èƒ½æœç´¢ã€å®‰è£…ã€å‘å¸ƒåŠŸèƒ½
6. **å¼€æºæ ‡å‡†**ï¼šéµå¾ªå¼€æºæœ€ä½³å®è·µï¼Œæä¾›å®Œæ•´çš„å¼€å‘å’Œå‘å¸ƒè§„èŒƒ
7. **å¼€å‘å‹å¥½**ï¼šçƒ­é‡è½½ã€æ¸…æ™°çš„é”™è¯¯æç¤ºã€å®Œå–„çš„å¼€å‘è§„èŒƒ
8. **å¹¶å‘å®‰å…¨**ï¼šåŸºäº Promise é“¾çš„åºåˆ—åŒ–é˜Ÿåˆ—ã€å•æ¬¡æ‰§è¡Œä¿è¯
9. **å®¹é”™è®¾è®¡**ï¼šæŒ‡æ•°é€€é¿é‡è¯•ã€åˆ†å±‚é”™è¯¯å¤„ç†ã€ä¼˜é›…é™çº§

éµå¾ªæœ¬è§„èŒƒï¼Œå¼€å‘è€…å¯ä»¥åˆ›å»ºé«˜è´¨é‡ã€å®‰å…¨å¯é çš„ Skillï¼Œæ‰©å±• OpenClaw çš„èƒ½åŠ›è¾¹ç•Œï¼Œä¸ºç”¨æˆ·æä¾›æ›´ä¸°å¯Œçš„ AI åŠ©æ‰‹ä½“éªŒã€‚

---

## å‚è€ƒèµ„æº

- **OpenClaw æ ¸å¿ƒæ‰§è¡Œæºç **ï¼š`src/node-host/runner.ts`
- **æ‰§è¡Œæƒé™ç®¡ç†**ï¼š`src/infra/exec-approvals.ts`
- **æ‰§è¡Œä¸»æœºé€šä¿¡**ï¼š`src/infra/exec-host.ts`
- **Gateway å®¢æˆ·ç«¯**ï¼š`src/gateway/client.ts`
- **æŠ€èƒ½ CLI å·¥å…·**ï¼š`src/cli/skills-cli.ts`
- **ClawHub æ–‡æ¡£**ï¼š`docs/tools/clawhub.md`
- **Agent Skills è§„èŒƒ**ï¼šhttps://agentskills.io/specification
- **ClawHub ç½‘ç«™**ï¼šhttps://clawhub.ai
- **è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ**ï¼šhttps://semver.org/
- **å¼€æºè®¸å¯è¯é€‰æ‹©**ï¼šhttps://choosealicense.com/

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼š4.0*
*æœ€åæ›´æ–°ï¼š2026-02-11*
